{"ast":null,"code":"import AddCustomer from \"@/views/AddCustomer\";\nimport ListCustomer from \"@/views/ListCustomer\";\nimport { onMounted, ref } from \"vue\";\nimport axios from 'axios';\n\n// 配置API基础URL\nconst API_BASE_URL = \"http://localhost:8081\";\n\n// 声明数组保存所有组件\n\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const views = [AddCustomer, ListCustomer];\n    // 声明变量保存当前需要显示的组件名\n    const currentComponent = ref(views[0]);\n    // 声明菜单对象集合数据\n    const menus = ref([]);\n    // 加载状态\n    const isLoading = ref(false);\n    const error = ref(null);\n\n    /**\n     * 获取菜单数据\n     */\n    const fetchMenus = async () => {\n      try {\n        isLoading.value = true;\n        const response = await axios.get(`${API_BASE_URL}/listMenus`);\n        menus.value = response.data;\n      } catch (err) {\n        error.value = err;\n        console.error(\"Failed to fetch menus:\", err);\n      } finally {\n        isLoading.value = false;\n      }\n    };\n\n    /**\n     * 处理菜单选择\n     * @param {string} id - 菜单项ID\n     */\n    const handlerSelect = async id => {\n      try {\n        isLoading.value = true;\n        const response = await axios.get(`${API_BASE_URL}/compIndex?id=${id}`);\n        currentComponent.value = views[response.data];\n      } catch (err) {\n        error.value = err;\n        console.error(\"Failed to load component:\", err);\n      } finally {\n        isLoading.value = false;\n      }\n    };\n\n    // 页面加载时获取菜单数据\n    onMounted(fetchMenus);\n    const __returned__ = {\n      API_BASE_URL,\n      views,\n      currentComponent,\n      menus,\n      isLoading,\n      error,\n      fetchMenus,\n      handlerSelect,\n      get AddCustomer() {\n        return AddCustomer;\n      },\n      get ListCustomer() {\n        return ListCustomer;\n      },\n      onMounted,\n      ref,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["AddCustomer","ListCustomer","onMounted","ref","axios","API_BASE_URL","views","currentComponent","menus","isLoading","error","fetchMenus","value","response","get","data","err","console","handlerSelect","id"],"sources":["D:/Program/Web QP/vue/erpfront/src/views/index.vue"],"sourcesContent":["<template>\n  <!-- 后台主页布局 -->\n  <div class=\"common-layout\">\n    <el-container>\n      <el-header class=\"top\">ERP系统</el-header>\n      <el-container   >\n        <el-aside width=\"240px\" class=\"left\">\n          系统菜单\n\n          <!-- 菜单组件 -->\n          <el-menu\n            class=\"el-menu-vertical-demo\"\n            @select=\"handlerSelect\"\n            background-color=\"#545c64\"\n            text-color=\"#fff\"\n            active-text-color=\"#ffd04b\"\n          >\n            <template v-if=\"isLoading\">\n              <div class=\"loading-text\">加载中...</div>\n            </template>\n            <template v-else-if=\"error\">\n              <div class=\"error-text\">菜单加载失败</div>\n            </template>\n            <template v-else>\n              <el-sub-menu v-for=\"menu in menus\" :index=\"String(menu.id)\" :key=\"menu.id\">\n                <template #title>\n                  <span>{{ menu.label }}</span>\n                </template>\n                <el-menu-item \n                  v-for=\"subMenu in menu.subMenus\" \n                  :index=\"String(subMenu.id)\"\n                  :key=\"subMenu.id\"\n                >\n                  {{ subMenu.label }}\n                </el-menu-item>\n              </el-sub-menu>\n            </template>\n          </el-menu>\n        </el-aside>\n        <el-main class=\"right\">\n            <!--通过点击左边菜单，动态显示不同组件 -->\n<!--           <component :is=\"currentComponent\"></component>-->\n          <component :is=\"currentComponent\"></component>\n        </el-main>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n\n<script setup>\nimport AddCustomer from \"@/views/AddCustomer\";\nimport ListCustomer from \"@/views/ListCustomer\";\nimport {onMounted, ref} from \"vue\";\nimport axios from 'axios';\n\n// 配置API基础URL\nconst API_BASE_URL = \"http://localhost:8081\";\n\n// 声明数组保存所有组件\nconst views = [AddCustomer, ListCustomer];\n// 声明变量保存当前需要显示的组件名\nconst currentComponent = ref(views[0]);\n// 声明菜单对象集合数据\nconst menus = ref([]);\n// 加载状态\nconst isLoading = ref(false);\nconst error = ref(null);\n\n/**\n * 获取菜单数据\n */\nconst fetchMenus = async () => {\n  try {\n    isLoading.value = true;\n    const response = await axios.get(`${API_BASE_URL}/listMenus`);\n    menus.value = response.data;\n  } catch (err) {\n    error.value = err;\n    console.error(\"Failed to fetch menus:\", err);\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n/**\n * 处理菜单选择\n * @param {string} id - 菜单项ID\n */\nconst handlerSelect = async (id) => {\n  try {\n    isLoading.value = true;\n    const response = await axios.get(`${API_BASE_URL}/compIndex?id=${id}`);\n    currentComponent.value = views[response.data];\n  } catch (err) {\n    error.value = err;\n    console.error(\"Failed to load component:\", err);\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n// 页面加载时获取菜单数据\nonMounted(fetchMenus);\n</script>\n\n<style scoped>\n.common-layout {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.top {\n  background-color: #409eff;\n  color: white;\n  padding: 0 20px;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  font-size: 18px;\n  font-weight: bold;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.left {\n  background-color: #545c64;\n  color: white;\n  height: calc(100vh - 60px);\n  overflow-y: auto;\n}\n\n.right {\n  background-color: #f5f7fa;\n  padding: 20px;\n  height: calc(100vh - 60px);\n  overflow-y: auto;\n}\n\n.el-menu {\n  border-right: none;\n}\n\n.el-menu-vertical-demo:not(.el-menu--collapse) {\n  width: 240px;\n}\n</style>"],"mappings":"AAmDA,OAAOA,WAAW,MAAM,qBAAqB;AAC7C,OAAOC,YAAY,MAAM,sBAAsB;AAC/C,SAAQC,SAAS,EAAEC,GAAG,QAAO,KAAK;AAClC,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,YAAY,GAAG,uBAAuB;;AAE5C;;;;;;;;IACA,MAAMC,KAAK,GAAG,CAACN,WAAW,EAAEC,YAAY,CAAC;IACzC;IACA,MAAMM,gBAAgB,GAAGJ,GAAG,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC;IACtC;IACA,MAAME,KAAK,GAAGL,GAAG,CAAC,EAAE,CAAC;IACrB;IACA,MAAMM,SAAS,GAAGN,GAAG,CAAC,KAAK,CAAC;IAC5B,MAAMO,KAAK,GAAGP,GAAG,CAAC,IAAI,CAAC;;IAEvB;AACA;AACA;IACA,MAAMQ,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACFF,SAAS,CAACG,KAAK,GAAG,IAAI;QACtB,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,GAAG,CAAC,GAAGT,YAAY,YAAY,CAAC;QAC7DG,KAAK,CAACI,KAAK,GAAGC,QAAQ,CAACE,IAAI;MAC7B,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZN,KAAK,CAACE,KAAK,GAAGI,GAAG;QACjBC,OAAO,CAACP,KAAK,CAAC,wBAAwB,EAAEM,GAAG,CAAC;MAC9C,CAAC,SAAS;QACRP,SAAS,CAACG,KAAK,GAAG,KAAK;MACzB;IACF,CAAC;;IAED;AACA;AACA;AACA;IACA,MAAMM,aAAa,GAAG,MAAOC,EAAE,IAAK;MAClC,IAAI;QACFV,SAAS,CAACG,KAAK,GAAG,IAAI;QACtB,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,GAAG,CAAC,GAAGT,YAAY,iBAAiBc,EAAE,EAAE,CAAC;QACtEZ,gBAAgB,CAACK,KAAK,GAAGN,KAAK,CAACO,QAAQ,CAACE,IAAI,CAAC;MAC/C,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZN,KAAK,CAACE,KAAK,GAAGI,GAAG;QACjBC,OAAO,CAACP,KAAK,CAAC,2BAA2B,EAAEM,GAAG,CAAC;MACjD,CAAC,SAAS;QACRP,SAAS,CAACG,KAAK,GAAG,KAAK;MACzB;IACF,CAAC;;IAED;IACAV,SAAS,CAACS,UAAU,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}