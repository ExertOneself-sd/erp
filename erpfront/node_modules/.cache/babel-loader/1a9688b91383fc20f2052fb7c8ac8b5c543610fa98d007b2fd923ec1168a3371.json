{"ast":null,"code":"import axios from 'axios';\nimport { ElMessage } from 'element-plus';\nimport { onMounted, reactive, ref } from 'vue';\nexport default {\n  __name: 'AddMenus',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = {\n      id: 'id',\n      label: 'label',\n      children: 'subMenus'\n    };\n    function resetForm() {\n      menuForm.label = '';\n      id = 0;\n    }\n    const treeNodeList = ref([]);\n    const menuForm = reactive({\n      label: ''\n    });\n    function loadMenuTree() {\n      axios.get(\"http://localhost:8081/listMenus\").then(response => {\n        treeNodeList.value = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    onMounted(function () {\n      loadMenuTree();\n    });\n    var id = 0;\n    function hanldNodeClick(node) {\n      console.log(node);\n      id = node.id;\n    }\n    function subMenuForm() {\n      if (id == 0) {\n        ElMessage(\"请选择当前新增菜单节点的父节点\");\n        return;\n      }\n      menuForm.pid = id;\n      axios.post(\"http://localhost:8081/saveMenus\", menuForm).then(response => {\n        if (response.data.code == 200) {\n          loadMenuTree();\n        }\n        ElMessage(response.data.msg);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    const __returned__ = {\n      props,\n      resetForm,\n      treeNodeList,\n      menuForm,\n      loadMenuTree,\n      get id() {\n        return id;\n      },\n      set id(v) {\n        id = v;\n      },\n      hanldNodeClick,\n      subMenuForm,\n      get axios() {\n        return axios;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      onMounted,\n      reactive,\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["axios","ElMessage","onMounted","reactive","ref","props","id","label","children","resetForm","menuForm","treeNodeList","loadMenuTree","get","then","response","value","data","catch","error","console","log","hanldNodeClick","node","subMenuForm","pid","post","code","msg"],"sources":["D:/Program/Java QP/Erp/erpfront/src/views/AddMenus.vue"],"sourcesContent":["<template>\r\n  <div class=\"menu-container\">\r\n    <h2 class=\"menu-title\">添加菜单</h2>\r\n    \r\n    <div class=\"menu-content\">\r\n      <div class=\"tree-section\">\r\n        <h3>选择父节点</h3>\r\n        <el-tree\r\n          :props=\"props\"\r\n          :data=\"treeNodeList\"\r\n          node-key=\"id\"\r\n          ref=\"treeRef\"\r\n          @node-click=\"hanldNodeClick\"\r\n          @check-change=\"hanldNodeChange\"\r\n          class=\"menu-tree\"\r\n          highlight-current\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-section\">\r\n        <el-form \r\n          :model=\"menuForm\" \r\n          label-width=\"100px\" \r\n          class=\"menu-form\"\r\n        >\r\n          <el-form-item label=\"菜单名称\">\r\n            <el-input \r\n              v-model=\"menuForm.label\" \r\n              placeholder=\"请输入菜单名称\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item class=\"form-actions\">\r\n            <el-button type=\"primary\" @click=\"subMenuForm\">确定</el-button>\r\n            <el-button @click=\"resetForm\">取消</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from 'axios';\r\nimport { ElMessage } from 'element-plus';\r\nimport { onMounted, reactive, ref } from 'vue';\r\n\r\nconst props = {\r\n  id: 'id',\r\n  label: 'label',\r\n  children: 'subMenus'\r\n}\r\n\r\nfunction resetForm() {\r\n  menuForm.label = ''\r\n  id = 0\r\n}\r\n\r\nconst treeNodeList = ref([])\r\nconst menuForm = reactive({\r\n    label:''\r\n})\r\n\r\nfunction loadMenuTree() {\r\n  axios.get(\"http://localhost:8081/listMenus\")\r\n  .then((response)=>{\r\n    treeNodeList.value = response.data\r\n  })\r\n  .catch((error)=>{\r\n    console.log(error)\r\n  })\r\n}\r\n\r\nonMounted(function(){\r\n  loadMenuTree()\r\n})\r\n\r\nvar id=0\r\n\r\nfunction hanldNodeClick(node){\r\n    console.log(node)\r\n    id=node.id\r\n}\r\n\r\nfunction subMenuForm(){\r\n    if(id==0){\r\n        ElMessage(\"请选择当前新增菜单节点的父节点\")\r\n        return\r\n    }\r\n    menuForm.pid=id\r\n    axios.post(\"http://localhost:8081/saveMenus\",menuForm)\r\n    .then((response)=>{\r\n     if(response.data.code==200){\r\n        loadMenuTree()\r\n     }\r\n     ElMessage(response.data.msg)\r\n    })\r\n    .catch((error)=>{\r\n        console.log(error)\r\n    })\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.menu-container {\r\n  padding: 20px;\r\n}\r\n\r\n.menu-title {\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n}\r\n\r\n.menu-content {\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n\r\n.tree-section, .form-section {\r\n  flex: 1;\r\n  background: #fff;\r\n  padding: 20px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.menu-tree {\r\n  margin-top: 10px;\r\n  min-height: 400px;\r\n  border: 1px solid #ebeef5;\r\n}\r\n\r\n.menu-form {\r\n  margin-top: 10px;\r\n}\r\n\r\n.form-actions {\r\n  text-align: right;\r\n  margin-top: 20px;\r\n}\r\n\r\nh3 {\r\n  margin: 0 0 15px 0;\r\n  font-size: 16px;\r\n  color: #606266;\r\n}\r\n</style>"],"mappings":"AA0CA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,cAAc;AACxC,SAASC,SAAS,EAAEC,QAAQ,EAAEC,GAAG,QAAQ,KAAK;;;;;;;IAE9C,MAAMC,KAAK,GAAG;MACZC,EAAE,EAAE,IAAI;MACRC,KAAK,EAAE,OAAO;MACdC,QAAQ,EAAE;IACZ,CAAC;IAED,SAASC,SAASA,CAAA,EAAG;MACnBC,QAAQ,CAACH,KAAK,GAAG,EAAE;MACnBD,EAAE,GAAG,CAAC;IACR;IAEA,MAAMK,YAAY,GAAGP,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMM,QAAQ,GAAGP,QAAQ,CAAC;MACtBI,KAAK,EAAC;IACV,CAAC,CAAC;IAEF,SAASK,YAAYA,CAAA,EAAG;MACtBZ,KAAK,CAACa,GAAG,CAAC,iCAAiC,CAAC,CAC3CC,IAAI,CAAEC,QAAQ,IAAG;QAChBJ,YAAY,CAACK,KAAK,GAAGD,QAAQ,CAACE,IAAI;MACpC,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAG;QACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB,CAAC,CAAC;IACJ;IAEAjB,SAAS,CAAC,YAAU;MAClBU,YAAY,CAAC,CAAC;IAChB,CAAC,CAAC;IAEF,IAAIN,EAAE,GAAC,CAAC;IAER,SAASgB,cAAcA,CAACC,IAAI,EAAC;MACzBH,OAAO,CAACC,GAAG,CAACE,IAAI,CAAC;MACjBjB,EAAE,GAACiB,IAAI,CAACjB,EAAE;IACd;IAEA,SAASkB,WAAWA,CAAA,EAAE;MAClB,IAAGlB,EAAE,IAAE,CAAC,EAAC;QACLL,SAAS,CAAC,iBAAiB,CAAC;QAC5B;MACJ;MACAS,QAAQ,CAACe,GAAG,GAACnB,EAAE;MACfN,KAAK,CAAC0B,IAAI,CAAC,iCAAiC,EAAChB,QAAQ,CAAC,CACrDI,IAAI,CAAEC,QAAQ,IAAG;QACjB,IAAGA,QAAQ,CAACE,IAAI,CAACU,IAAI,IAAE,GAAG,EAAC;UACxBf,YAAY,CAAC,CAAC;QACjB;QACAX,SAAS,CAACc,QAAQ,CAACE,IAAI,CAACW,GAAG,CAAC;MAC7B,CAAC,CAAC,CACDV,KAAK,CAAEC,KAAK,IAAG;QACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB,CAAC,CAAC;IACN","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}