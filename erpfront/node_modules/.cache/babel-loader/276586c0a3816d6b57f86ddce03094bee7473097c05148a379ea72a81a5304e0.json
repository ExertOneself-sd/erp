{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive, ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { ElMessage, ElMessageBox } from \"element-plus\";\nimport { getCurrentInstance } from \"vue\";\nexport default {\n  __name: 'login',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const loginForm = ref(null);\n    const loading = ref(false);\n    const axios = getCurrentInstance().proxy.axios;\n    const loginUser = reactive({\n      uname: \"admin\",\n      // 预设账号便于测试\n      upwd: \"123456\" // 预设密码便于测试\n    });\n\n    // 表单验证规则\n    const rules = reactive({\n      uname: [{\n        required: true,\n        message: \"请输入账号\",\n        trigger: \"blur\"\n      }],\n      upwd: [{\n        required: true,\n        message: \"请输入密码\",\n        trigger: \"blur\"\n      }]\n    });\n\n    // 登录方法\n    function userLogin() {\n      loginForm.value.validate(valid => {\n        if (valid) {\n          loading.value = true;\n          axios.post(\"http://localhost:8081/userLogin\", loginUser).then(response => {\n            if (response.data.code == 200) {\n              ElMessage({\n                message: \"登录成功\",\n                type: \"success\",\n                duration: 1500\n              });\n              // 模拟登录延迟，增强用户体验\n              setTimeout(() => {\n                router.push({\n                  name: \"index\"\n                });\n              }, 800);\n            } else {\n              ElMessage(response.data.msg);\n            }\n          }).catch(error => {\n            console.log(error);\n            ElMessage({\n              message: \"登录失败，请检查网络连接\",\n              type: \"error\"\n            });\n          }).finally(() => {\n            loading.value = false;\n          });\n        } else {\n          console.log(\"验证失败\");\n          return false;\n        }\n      });\n    }\n\n    // 页面加载动画\n    onMounted(() => {\n      const card = document.querySelector('.login-card');\n      if (card) {\n        card.style.opacity = '0';\n        card.style.transform = 'translateY(20px)';\n        setTimeout(() => {\n          card.style.transition = 'all 0.6s ease';\n          card.style.opacity = '1';\n          card.style.transform = 'translateY(0)';\n        }, 100);\n      }\n    });\n    const __returned__ = {\n      router,\n      loginForm,\n      loading,\n      axios,\n      loginUser,\n      rules,\n      userLogin,\n      reactive,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      },\n      getCurrentInstance\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","ref","onMounted","useRouter","ElMessage","ElMessageBox","getCurrentInstance","router","loginForm","loading","axios","proxy","loginUser","uname","upwd","rules","required","message","trigger","userLogin","value","validate","valid","post","then","response","data","code","type","duration","setTimeout","push","name","msg","catch","error","console","log","finally","card","document","querySelector","style","opacity","transform","transition"],"sources":["D:/Program/Java QP/Erp/erpfront/src/views/login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-wrapper\">\r\n    <!-- 背景装饰元素 -->\r\n    <div class=\"bg-pattern\"></div>\r\n    <div class=\"bg-gradient\"></div>\r\n    \r\n    <el-card class=\"login-card\" shadow=\"hover\">\r\n      <!-- 顶部装饰 -->\r\n      <div class=\"login-header\">\r\n        <div class=\"logo\">\r\n          <i class=\"el-icon-s-home\"></i>\r\n        </div>\r\n        <h1 class=\"title\">ERP系统</h1>\r\n      </div>\r\n      \r\n      <el-form\r\n        ref=\"loginForm\"\r\n        :model=\"loginUser\"\r\n        size=\"large\"\r\n        label-position=\"right\"\r\n        label-width=\"70px\"\r\n        class=\"login-form\"\r\n        :rules=\"rules\"\r\n        @keyup.enter.prevent=\"userLogin\"\r\n      >\r\n        <el-form-item prop=\"uname\">\r\n          <el-input \r\n            v-model=\"loginUser.uname\" \r\n            placeholder=\"请输入账号\"\r\n            prefix-icon=\"el-icon-user\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"upwd\">\r\n          <el-input \r\n            type=\"password\" \r\n            v-model=\"loginUser.upwd\" \r\n            placeholder=\"请输入密码\"\r\n            prefix-icon=\"el-icon-lock\"\r\n            show-password\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      \r\n      <div class=\"login-footer\">\r\n        <el-button\r\n          @click=\"userLogin\"\r\n          type=\"primary\"\r\n          size=\"large\"\r\n          :loading=\"loading\"\r\n          class=\"login-button\"\r\n          :style=\"{width: '100%'}\"\r\n        >\r\n          登录\r\n        </el-button>\r\n      </div>\r\n    </el-card>\r\n    \r\n    <!-- 加载遮罩 -->\r\n    <div v-if=\"loading\" class=\"loading-mask\">\r\n      <el-spinner size=\"large\" class=\"loading-spinner\"></el-spinner>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport { getCurrentInstance } from \"vue\";\r\n\r\nconst router = useRouter();\r\nconst loginForm = ref(null);\r\nconst loading = ref(false);\r\nconst axios = getCurrentInstance().proxy.axios;\r\n\r\nconst loginUser = reactive({\r\n  uname: \"admin\", // 预设账号便于测试\r\n  upwd: \"123456\"   // 预设密码便于测试\r\n});\r\n\r\n// 表单验证规则\r\nconst rules = reactive({\r\n  uname: [{ required: true, message: \"请输入账号\", trigger: \"blur\" }],\r\n  upwd: [{ required: true, message: \"请输入密码\", trigger: \"blur\" }]\r\n});\r\n\r\n// 登录方法\r\nfunction userLogin() {\r\n  loginForm.value.validate((valid) => {\r\n    if (valid) {\r\n      loading.value = true;\r\n      axios.post(\"http://localhost:8081/userLogin\", loginUser)\r\n        .then((response) => {\r\n          if (response.data.code == 200) {\r\n            ElMessage({\r\n              message: \"登录成功\",\r\n              type: \"success\",\r\n              duration: 1500\r\n            });\r\n            // 模拟登录延迟，增强用户体验\r\n            setTimeout(() => {\r\n              router.push({ name: \"index\" });\r\n            }, 800);\r\n          } else {\r\n            ElMessage(response.data.msg);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          ElMessage({\r\n            message: \"登录失败，请检查网络连接\",\r\n            type: \"error\"\r\n          });\r\n        })\r\n        .finally(() => {\r\n          loading.value = false;\r\n        });\r\n    } else {\r\n      console.log(\"验证失败\");\r\n      return false;\r\n    }\r\n  });\r\n}\r\n\r\n// 页面加载动画\r\nonMounted(() => {\r\n  const card = document.querySelector('.login-card');\r\n  if (card) {\r\n    card.style.opacity = '0';\r\n    card.style.transform = 'translateY(20px)';\r\n    setTimeout(() => {\r\n      card.style.transition = 'all 0.6s ease';\r\n      card.style.opacity = '1';\r\n      card.style.transform = 'translateY(0)';\r\n    }, 100);\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.login-wrapper {\r\n  position: relative;\r\n  min-height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 20px;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n/* 背景样式 */\r\n.bg-pattern {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-image: \r\n    linear-gradient(to right, rgba(22, 93, 255, 0.05) 1px, transparent 1px),\r\n    linear-gradient(to bottom, rgba(22, 93, 255, 0.05) 1px, transparent 1px);\r\n  background-size: 20px 20px;\r\n  z-index: 0;\r\n}\r\n\r\n.bg-gradient {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(135deg, #1e3c72 0%, #1e3c72 1%, #2a5298 100%);\r\n  opacity: 0.05;\r\n  z-index: 1;\r\n}\r\n\r\n/* 登录卡片样式 */\r\n.login-card {\r\n  position: relative;\r\n  z-index: 2;\r\n  width: 100%;\r\n  max-width: 420px;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.login-card:hover {\r\n  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n/* 头部样式 */\r\n.login-header {\r\n  padding: 40px 30px 20px;\r\n  text-align: center;\r\n  border-bottom: 1px solid #ebeef5;\r\n}\r\n\r\n.logo {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 80px;\r\n  height: 80px;\r\n  background-color: #165DFF;\r\n  border-radius: 50%;\r\n  color: white;\r\n  font-size: 32px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 4px 12px rgba(22, 93, 255, 0.3);\r\n}\r\n\r\n.title {\r\n  font-size: 28px;\r\n  font-weight: 600;\r\n  color: #303133;\r\n  margin: 0;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n/* 表单样式 */\r\n.login-form {\r\n  padding: 30px;\r\n}\r\n\r\n.el-form-item {\r\n  margin-bottom: 25px;\r\n}\r\n\r\n.el-input {\r\n  border-radius: 8px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.el-input:focus-within {\r\n  .el-input__inner {\r\n    box-shadow: 0 0 0 2px rgba(22, 93, 255, 0.2);\r\n  }\r\n}\r\n\r\n.el-input__prefix {\r\n  color: #8c939d;\r\n}\r\n\r\n/* 底部样式 */\r\n.login-footer {\r\n  padding: 0 30px 30px;\r\n}\r\n\r\n.login-button {\r\n  height: 50px;\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.login-button:hover {\r\n  background-color: #0d47a1;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(22, 93, 255, 0.3);\r\n}\r\n\r\n/* 加载遮罩样式 */\r\n.loading-mask {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100vh;\r\n  background-color: rgba(255, 255, 255, 0.8);\r\n  z-index: 1000;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.loading-spinner {\r\n  color: #165DFF;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 450px) {\r\n  .login-card {\r\n    max-width: 360px;\r\n  }\r\n  \r\n  .login-header {\r\n    padding: 30px 20px 15px;\r\n  }\r\n  \r\n  .login-form, .login-footer {\r\n    padding: 20px;\r\n  }\r\n  \r\n  .title {\r\n    font-size: 24px;\r\n  }\r\n}\r\n</style>"],"mappings":";AAiEA,SAASA,QAAQ,EAAEC,GAAG,EAAEC,SAAS,QAAQ,KAAK;AAC9C,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,SAAS,EAAEC,YAAY,QAAQ,cAAc;AACtD,SAASC,kBAAkB,QAAQ,KAAK;;;;;;;IAExC,MAAMC,MAAM,GAAGJ,SAAS,CAAC,CAAC;IAC1B,MAAMK,SAAS,GAAGP,GAAG,CAAC,IAAI,CAAC;IAC3B,MAAMQ,OAAO,GAAGR,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMS,KAAK,GAAGJ,kBAAkB,CAAC,CAAC,CAACK,KAAK,CAACD,KAAK;IAE9C,MAAME,SAAS,GAAGZ,QAAQ,CAAC;MACzBa,KAAK,EAAE,OAAO;MAAE;MAChBC,IAAI,EAAE,QAAQ,CAAG;IACnB,CAAC,CAAC;;IAEF;IACA,MAAMC,KAAK,GAAGf,QAAQ,CAAC;MACrBa,KAAK,EAAE,CAAC;QAAEG,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,OAAO;QAAEC,OAAO,EAAE;MAAO,CAAC,CAAC;MAC9DJ,IAAI,EAAE,CAAC;QAAEE,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,OAAO;QAAEC,OAAO,EAAE;MAAO,CAAC;IAC9D,CAAC,CAAC;;IAEF;IACA,SAASC,SAASA,CAAA,EAAG;MACnBX,SAAS,CAACY,KAAK,CAACC,QAAQ,CAAEC,KAAK,IAAK;QAClC,IAAIA,KAAK,EAAE;UACTb,OAAO,CAACW,KAAK,GAAG,IAAI;UACpBV,KAAK,CAACa,IAAI,CAAC,iCAAiC,EAAEX,SAAS,CAAC,CACrDY,IAAI,CAAEC,QAAQ,IAAK;YAClB,IAAIA,QAAQ,CAACC,IAAI,CAACC,IAAI,IAAI,GAAG,EAAE;cAC7BvB,SAAS,CAAC;gBACRa,OAAO,EAAE,MAAM;gBACfW,IAAI,EAAE,SAAS;gBACfC,QAAQ,EAAE;cACZ,CAAC,CAAC;cACF;cACAC,UAAU,CAAC,MAAM;gBACfvB,MAAM,CAACwB,IAAI,CAAC;kBAAEC,IAAI,EAAE;gBAAQ,CAAC,CAAC;cAChC,CAAC,EAAE,GAAG,CAAC;YACT,CAAC,MAAM;cACL5B,SAAS,CAACqB,QAAQ,CAACC,IAAI,CAACO,GAAG,CAAC;YAC9B;UACF,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;YAChBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;YAClB/B,SAAS,CAAC;cACRa,OAAO,EAAE,cAAc;cACvBW,IAAI,EAAE;YACR,CAAC,CAAC;UACJ,CAAC,CAAC,CACDU,OAAO,CAAC,MAAM;YACb7B,OAAO,CAACW,KAAK,GAAG,KAAK;UACvB,CAAC,CAAC;QACN,CAAC,MAAM;UACLgB,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;UACnB,OAAO,KAAK;QACd;MACF,CAAC,CAAC;IACJ;;IAEA;IACAnC,SAAS,CAAC,MAAM;MACd,MAAMqC,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,aAAa,CAAC;MAClD,IAAIF,IAAI,EAAE;QACRA,IAAI,CAACG,KAAK,CAACC,OAAO,GAAG,GAAG;QACxBJ,IAAI,CAACG,KAAK,CAACE,SAAS,GAAG,kBAAkB;QACzCd,UAAU,CAAC,MAAM;UACfS,IAAI,CAACG,KAAK,CAACG,UAAU,GAAG,eAAe;UACvCN,IAAI,CAACG,KAAK,CAACC,OAAO,GAAG,GAAG;UACxBJ,IAAI,CAACG,KAAK,CAACE,SAAS,GAAG,eAAe;QACxC,CAAC,EAAE,GAAG,CAAC;MACT;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}