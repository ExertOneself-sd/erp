{"ast":null,"code":"import { reactive, ref, onMounted, onUnmounted } from 'vue';\nimport { Plus, Delete, ZoomIn } from '@element-plus/icons-vue';\nimport axios from 'axios';\nexport default {\n  __name: 'ItemManager',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const dialogItemVisible = ref(false);\n    const itemForm = reactive({\n      id: 0\n    });\n    function openItemDialog() {\n      dialogItemVisible.value = true;\n      loadSupplyList();\n      loadPlaceList();\n      loadStoreList();\n      loadBrandList();\n      loadUnitList();\n    }\n    const dialogImageUrl = ref(null);\n    const dialogVisible = ref(false);\n    const dialogWidth = ref('80%');\n    function updateDialogWidth() {\n      const screenWidth = window.innerWidth;\n      if (screenWidth < 768) {\n        dialogWidth.value = '95%';\n      } else if (screenWidth < 992) {\n        dialogWidth.value = '85%';\n      } else {\n        dialogWidth.value = '70%';\n      }\n    }\n    onMounted(() => {\n      updateDialogWidth();\n      window.addEventListener('resize', updateDialogWidth);\n    });\n    onUnmounted(() => {\n      window.removeEventListener('resize', updateDialogWidth);\n    });\n    function handlePictureCardPreview(file) {\n      console.log(\"============\" + file);\n      dialogImageUrl.value = file.url;\n      dialogVisible.value = true;\n    }\n    function handlAvatarSuccess(path) {\n      console.log(path);\n    }\n    const supplyList = ref([]);\n    const placeList = ref([]);\n    const storeList = ref([]);\n    const brandList = ref([]);\n    const unitList = ref([]);\n    function loadSupplyList() {\n      axios.get(\"http://localhost:8081/supplyList\").then(response => {\n        supplyList.value = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    function loadPlaceList() {\n      axios.get(\"http://localhost:8081/placeList\").then(response => {\n        placeList.value = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    function loadStoreList() {\n      axios.get(\"http://localhost:8081/storeList\").then(response => {\n        storeList.value = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    function loadBrandList() {\n      axios.get(\"http://localhost:8081/brandList\").then(response => {\n        brandList.value = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    function loadUnitList() {\n      axios.get(\"http://localhost:8081/unitList\").then(response => {\n        unitList.value = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    const __returned__ = {\n      dialogItemVisible,\n      itemForm,\n      openItemDialog,\n      dialogImageUrl,\n      dialogVisible,\n      dialogWidth,\n      updateDialogWidth,\n      handlePictureCardPreview,\n      handlAvatarSuccess,\n      supplyList,\n      placeList,\n      storeList,\n      brandList,\n      unitList,\n      loadSupplyList,\n      loadPlaceList,\n      loadStoreList,\n      loadBrandList,\n      loadUnitList,\n      reactive,\n      ref,\n      onMounted,\n      onUnmounted,\n      get Plus() {\n        return Plus;\n      },\n      get Delete() {\n        return Delete;\n      },\n      get ZoomIn() {\n        return ZoomIn;\n      },\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","ref","onMounted","onUnmounted","Plus","Delete","ZoomIn","axios","dialogItemVisible","itemForm","id","openItemDialog","value","loadSupplyList","loadPlaceList","loadStoreList","loadBrandList","loadUnitList","dialogImageUrl","dialogVisible","dialogWidth","updateDialogWidth","screenWidth","window","innerWidth","addEventListener","removeEventListener","handlePictureCardPreview","file","console","log","url","handlAvatarSuccess","path","supplyList","placeList","storeList","brandList","unitList","get","then","response","data","catch","error"],"sources":["D:/Program/Java QP/Erp/erpfront/src/views/ItemManager.vue"],"sourcesContent":["<template>\r\n  <h2>商品信息</h2>\r\n\r\n  <div style=\"text-align: left\">\r\n    <el-button type=\"primary\"  @click=\"openItemDialog\">添加商品</el-button>\r\n  </div>\r\n\r\n  <el-dialog v-model=\"dialogItemVisible\" :width=\"dialogWidth\" :close-on-click-modal=\"false\" class=\"custom-dialog\">\r\n    \r\n    <div style=\"text-align: left\">\r\n      商品图片:<!--  上传商品图片控件  -->\r\n      <el-upload action=\"http://localhost:8081/uploadImg\" list-type=\"picture-card\" :auto-upload=\"true\" method=\"post\" :on-success=\"handlAvatarSuccess\">\r\n        <el-icon>\r\n          <Plus/>\r\n        </el-icon>\r\n\r\n        <template #file=\"{ file }\">\r\n          <div>\r\n            <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\"/>\r\n            <span class=\"el-upload-list__item-actions\">\r\n          <span\r\n              class=\"el-upload-list__item-preview\"\r\n              @click=\"handlePictureCardPreview(file)\"\r\n          >\r\n            <el-icon><zoom-in/></el-icon>\r\n          </span>\r\n        </span>\r\n          </div>\r\n        </template>\r\n      </el-upload>\r\n    </div>\r\n\r\n  <el-form :model=\"itemForm\" label-width=\"100px\" style=\"max-width: 90%; margin: 20px auto;\">\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"名称\" required>\r\n          <el-input v-model=\"itemForm.name\" placeholder=\"请输入商品名称\" />\r\n        </el-form-item>\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"编号\" required>\r\n          <el-input v-model=\"itemForm.code\" placeholder=\"请输入商品编号\" />\r\n        </el-form-item>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"种类\" required>\r\n          <el-input v-model=\"itemForm.category\" placeholder=\"选择类型\" />\r\n        </el-form-item>\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"库存\">\r\n          <el-input-number v-model=\"itemForm.stock\" :min=\"0\" />\r\n        </el-form-item>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"品牌\" required>\r\n          <el-select v-model=\"itemForm.brand\" placeholder=\"请选择品牌\">\r\n            <el-option\r\n            v-for=\"item in brandList\"\r\n            :key=\"item.brandId\"\r\n            :label=\"item.brandName\"\r\n            :value=\"item.brandId\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"仓库\" required>\r\n          <el-select v-model=\"itemForm.warehouse\" placeholder=\"请选择仓库\">\r\n            <el-option\r\n            v-for=\"item in storeList\"\r\n            :key=\"item.storeId\"\r\n            :label=\"item.storeName\"\r\n            :value=\"item.storeId\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"供应商\" required>\r\n          <el-select v-model=\"itemForm.supplier\" placeholder=\"请选择供应商\">\r\n            <el-option\r\n            v-for=\"item in supplyList\"\r\n            :key=\"item.supplyId\"\r\n            :label=\"item.supplyName\"\r\n            :value=\"item.supplyId\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"产地\" required>\r\n          <el-select v-model=\"itemForm.origin\" placeholder=\"请选择产地\">\r\n            <el-option\r\n            v-for=\"item in placeList\"\r\n            :key=\"item.placeId\"\r\n            :label=\"item.placeName\"\r\n            :value=\"item.placeId\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-form-item label=\"单位\" required>\r\n      <el-select v-model=\"itemForm.unit\" placeholder=\"请选择单位\">\r\n        <el-option\r\n            v-for=\"item in unitList\"\r\n            :key=\"item.unitId\"\r\n            :label=\"item.unitName\"\r\n            :value=\"item.unitId\"\r\n            />\r\n      </el-select>\r\n    </el-form-item>\r\n\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"进价\">\r\n          <el-input v-model=\"itemForm.purchasePrice\" placeholder=\"0\">\r\n            <template #append>元</template>\r\n          </el-input>\r\n        </el-form-item>\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"售价\">\r\n          <el-input v-model=\"itemForm.sellingPrice\" placeholder=\"0\">\r\n            <template #append>元</template>\r\n          </el-input>\r\n        </el-form-item>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-form-item label=\"会员价\">\r\n      <el-input v-model=\"itemForm.vipPrice\" placeholder=\"0\">\r\n        <template #append>元</template>\r\n      </el-input>\r\n    </el-form-item>\r\n\r\n    <el-form-item label=\"详细介绍\">\r\n      <el-input v-model=\"itemForm.description\" type=\"textarea\" :rows=\"3\" />\r\n    </el-form-item>\r\n\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"生产日期\">\r\n          <el-date-picker v-model=\"itemForm.productionDate\" type=\"date\" placeholder=\"年/月/日\" />\r\n        </el-form-item>\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"保质期\">\r\n          <el-date-picker v-model=\"itemForm.expiryDate\" type=\"date\" placeholder=\"年/月/日\" />\r\n        </el-form-item>\r\n      </el-col>\r\n    </el-row>\r\n  </el-form>\r\n  \r\n  </el-dialog>\r\n  <el-dialog v-model=\"dialogVisible\">\r\n    <img w-full :src=\"dialogImageUrl\" alt=\"Preview Image\" style=\"width: 100%\" />\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport { reactive, ref, onMounted, onUnmounted } from 'vue'\r\nimport { Plus, Delete, ZoomIn } from '@element-plus/icons-vue'\r\nimport axios from 'axios'\r\n\r\nconst dialogItemVisible = ref(false)\r\nconst itemForm = reactive({\r\n  id:0\r\n})\r\n\r\nfunction openItemDialog() {\r\n    dialogItemVisible.value = true\r\n    loadSupplyList()\r\n    loadPlaceList()\r\n    loadStoreList()\r\n    loadBrandList()\r\n    loadUnitList()\r\n}\r\n\r\nconst dialogImageUrl = ref(null)\r\nconst dialogVisible = ref(false)\r\nconst dialogWidth = ref('80%')\r\n\r\nfunction updateDialogWidth() {\r\n  const screenWidth = window.innerWidth\r\n  if (screenWidth < 768) {\r\n    dialogWidth.value = '95%'\r\n  } else if (screenWidth < 992) {\r\n    dialogWidth.value = '85%'\r\n  } else {\r\n    dialogWidth.value = '70%'\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  updateDialogWidth()\r\n  window.addEventListener('resize', updateDialogWidth)\r\n})\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', updateDialogWidth)\r\n})\r\n\r\nfunction handlePictureCardPreview(file){\r\n  console.log(\"============\"+file)\r\n  dialogImageUrl.value = file.url\r\n  dialogVisible.value = true\r\n}\r\n\r\nfunction handlAvatarSuccess(path){\r\n  console.log(path)\r\n}\r\n\r\nconst supplyList=ref([])\r\nconst placeList=ref([])\r\nconst storeList=ref([])\r\nconst brandList=ref([])\r\nconst unitList=ref([])\r\n\r\nfunction loadSupplyList(){\r\n  axios.get(\"http://localhost:8081/supplyList\")\r\n  .then((response)=>{\r\n    supplyList.value=response.data\r\n  })\r\n  .catch((error)=>{\r\n    console.log(error)\r\n  })\r\n}\r\n\r\nfunction loadPlaceList(){\r\n  axios.get(\"http://localhost:8081/placeList\")\r\n  .then((response)=>{\r\n    placeList.value=response.data\r\n  })\r\n  .catch((error)=>{\r\n    console.log(error)\r\n  })\r\n}\r\n\r\n\r\nfunction loadStoreList(){\r\n  axios.get(\"http://localhost:8081/storeList\")\r\n  .then((response)=>{\r\n    storeList.value=response.data\r\n  })\r\n  .catch((error)=>{\r\n    console.log(error)\r\n  })\r\n}\r\n\r\nfunction loadBrandList(){\r\n  axios.get(\"http://localhost:8081/brandList\")\r\n  .then((response)=>{\r\n    brandList.value=response.data\r\n  })\r\n  .catch((error)=>{\r\n    console.log(error)\r\n  })\r\n}\r\n\r\nfunction loadUnitList(){\r\n  axios.get(\"http://localhost:8081/unitList\")\r\n  .then((response)=>{\r\n    unitList.value=response.data\r\n  })\r\n  .catch((error)=>{\r\n    console.log(error)\r\n  })\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n.custom-dialog .el-dialog__body {\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}