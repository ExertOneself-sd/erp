{"ast":null,"code":"import axios from 'axios';\nimport { onMounted, ref, reactive } from 'vue';\nimport { ElMessage } from \"element-plus\";\nexport default {\n  __name: 'ListSellJh',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const sellJhList = ref([]);\n    const total = ref();\n    function sellJhListQeury(pageNum) {\n      axios.get(\"http://localhost:8081/sellJhList?pageNum=\" + pageNum).then(response => {\n        sellJhList.value = response.data.sellJhList;\n        total.value = response.data.total;\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    onMounted(function () {\n      sellJhListQeury(1);\n    });\n    function sellJhPageChange(PageNum) {\n      sellJhListQeury(PageNum);\n    }\n    function getChannelName(channelId) {\n      switch (channelId) {\n        case 0:\n          return \"自媒体\";\n        case 1:\n          return \"网络推广\";\n        case 2:\n          return \"老客户介绍\";\n        case 3:\n          return \"陌拜\";\n        case 4:\n          return \"二次客户\";\n      }\n    }\n    const dialogSellJhVisible = ref(false);\n    const sellJhForm = reactive({\n      custid: '',\n      channelId: '',\n      money: 0.0,\n      nowStep: '',\n      empId: 100\n    });\n    const custList = ref([]);\n    function openSellJhDialog(row) {\n      dialogSellJhVisible.value = true;\n      axios.get(\"http://localhost:8081/listAllCust\").then(response => {\n        custList.value = response.data;\n        sellJhForm.custid = row.custid;\n        sellJhForm.channelId = row.channelId;\n        sellJhForm.money = row.money;\n        sellJhForm.nowStep = row.nowStep;\n        sellJhForm.empId = row.empId;\n        sellJhForm.id = row.id;\n        console.log(sellJhForm);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    const channeList = ref([{\n      id: 0,\n      label: '自媒体'\n    }, {\n      id: 1,\n      label: '网络推广'\n    }, {\n      id: 2,\n      label: '老客户介绍'\n    }, {\n      id: 3,\n      label: '陌拜'\n    }, {\n      id: 4,\n      label: '二次客户'\n    }]);\n    const __returned__ = {\n      sellJhList,\n      total,\n      sellJhListQeury,\n      sellJhPageChange,\n      getChannelName,\n      dialogSellJhVisible,\n      sellJhForm,\n      custList,\n      openSellJhDialog,\n      channeList,\n      get axios() {\n        return axios;\n      },\n      onMounted,\n      ref,\n      reactive,\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["axios","onMounted","ref","reactive","ElMessage","sellJhList","total","sellJhListQeury","pageNum","get","then","response","value","data","catch","error","console","log","sellJhPageChange","PageNum","getChannelName","channelId","dialogSellJhVisible","sellJhForm","custid","money","nowStep","empId","custList","openSellJhDialog","row","id","channeList","label"],"sources":["D:/Program/Web QP/vue/erpfront/src/views/ListSellJh.vue"],"sourcesContent":["<template>\r\n  <h2>客户销售过程列表</h2>\r\n  <el-table :data=\"sellJhList\" style=\"width: 100%\">\r\n    <el-table-column prop=\"id\" label=\"销售编号\" width=\"180\" />\r\n    <el-table-column prop=\"custName\" label=\"客户名称\" width=\"180\" />\r\n    <el-table-column prop=\"channelId\" label=\"销售渠道\" >\r\n        <template #default=\"scope\">\r\n            {{getChannelName(scope.row.channelId)}}\r\n        </template>\r\n    </el-table-column>\r\n    <el-table-column prop=\"money\" label=\"销售金额\" />\r\n    <el-table-column prop=\"nowStep\" label=\"开发阶段\" />\r\n    <el-table-column prop=\"empId\" label=\"业务员\" />\r\n\r\n    <el-table-column fixed=\"right\" label=\"操作\" width=\"120\">\r\n      <template #default=\"scope\">\r\n        <el-button link type=\"primary\" size=\"small\" >删除</el-button>\r\n        <el-button link type=\"primary\" size=\"small\" @click=\"openSellJhDialog(scope.row)\">修改</el-button>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n  <hr/>\r\n\r\n  <el-pagination\r\n    :page-size=\"10\"\r\n    :pager-count=\"10\"\r\n    layout=\"prev, pager, next\"\r\n    :total=\"total\"\r\n    class=\"mt-4\" @current-change=\"sellJhPageChange\"\r\n  />\r\n  <el-dialog\r\n      v-model=\"dialogSellJhVisible\"\r\n      width=\"80%\"\r\n  >\r\n  <h2>修改销售过程</h2>\r\n  <el-form :model=\"sellJhForm\" label-width=\"120px\">\r\n    <el-form-item label=\"客户名称\">\r\n      <el-select\r\n          v-model=\"sellJhForm.custid\"\r\n          class=\"m-2\"\r\n          placeholder=\"请选择客户\"\r\n          size=\"large\"\r\n          style=\"width: 80%\"\r\n      >\r\n        <el-option\r\n            v-for=\"item in custList\"\r\n            :key=\"item.id\"\r\n            :label=\"item.custName\"\r\n            :value=\"item.id\"\r\n        />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"销售渠道\">\r\n      <el-select v-model=\"sellJhForm.channelId\" placeholder=\"请选择渠道....\" style=\"width: 80%\">\r\n        <el-option v-for=\"opt in channeList\" \r\n        :value=\"opt.id\"\r\n        :label=\"opt.label\"\r\n        :key=\"opt.id\"></el-option>\r\n        <el-option label=\"自媒体\" value=\"0\" />\r\n        <el-option label=\"网络推广\" value=\"1\" />\r\n        <el-option label=\"老客户介绍\" value=\"2\" />\r\n        <el-option label=\"陌拜\" value=\"3\" />\r\n        <el-option label=\"二次客户\" value=\"4\" />\r\n      </el-select>\r\n    </el-form-item>\r\n     <el-form-item label=\"销售金额\">\r\n      <el-input v-model=\"sellJhForm.money\" style=\"width: 80%\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"开发阶段\">\r\n      <el-select v-model=\"sellJhForm.nowStep\" placeholder=\"请选择....\" style=\"width: 80%\">\r\n        <el-option label=\"解除\" value=\"解除\" />\r\n        <el-option label=\"报价\" value=\"报价\" />\r\n        <el-option label=\"签约\" value=\"签约\" />\r\n      </el-select>\r\n    </el-form-item>\r\n     <el-form-item label=\"业务员\">\r\n      <el-input v-model=\"sellJhForm.empId\" style=\"width: 80%\" readonly=\"readonly\"/>\r\n    </el-form-item>\r\n        <el-form-item>\r\n      <el-button type=\"primary\" @click=\"subCustFrom\">保存</el-button>\r\n      <el-button>取消</el-button>\r\n    </el-form-item>\r\n  </el-form>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from 'axios';\r\nimport {onMounted, ref ,reactive} from 'vue';\r\nimport {ElMessage} from \"element-plus\";\r\n\r\nconst sellJhList=ref([])\r\nconst total=ref()\r\nfunction sellJhListQeury(pageNum){\r\n    axios.get(\"http://localhost:8081/sellJhList?pageNum=\"+pageNum)\r\n    .then((response)=>{\r\n        sellJhList.value=response.data.sellJhList\r\n        total.value=response.data.total\r\n    })\r\n    .catch((error)=>{\r\n        console.log(error)\r\n    })\r\n}\r\nonMounted(function(){\r\n    sellJhListQeury(1)\r\n})\r\nfunction sellJhPageChange(PageNum){\r\n    sellJhListQeury(PageNum)\r\n}\r\n\r\nfunction getChannelName(channelId){\r\n    switch(channelId){\r\n        case 0:\r\n            return \"自媒体\"\r\n        case 1:\r\n            return \"网络推广\"\r\n        case 2:\r\n            return \"老客户介绍\"\r\n        case 3:\r\n            return \"陌拜\"\r\n        case 4:\r\n            return \"二次客户\"\r\n    }\r\n}\r\n\r\nconst dialogSellJhVisible=ref(false)\r\nconst sellJhForm=reactive({\r\n    custid:'',\r\n    channelId:'',\r\n    money:0.0,\r\n    nowStep:'',\r\n    empId:100\r\n})\r\n\r\nconst custList=ref([])\r\n\r\n\r\nfunction openSellJhDialog(row){\r\n    dialogSellJhVisible.value=true\r\n    axios.get(\"http://localhost:8081/listAllCust\")\r\n    .then((response)=>{\r\n        custList.value=response.data;\r\n        sellJhForm.custid=row.custid\r\n        sellJhForm.channelId=row.channelId\r\n        sellJhForm.money=row.money\r\n        sellJhForm.nowStep=row.nowStep\r\n        sellJhForm.empId=row.empId\r\n        sellJhForm.id=row.id\r\n        console.log(sellJhForm)\r\n    })\r\n    .catch((error)=>{\r\n        console.log(error)\r\n    })\r\n}\r\n\r\nconst channeList=ref([{id:0,label:'自媒体'},{id:1,label:'网络推广'},{id:2,label:'老客户介绍'},{id:3,label:'陌拜'},{id:4,label:'二次客户'}])\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"mappings":"AAuFA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,SAAS,EAAEC,GAAG,EAAEC,QAAQ,QAAO,KAAK;AAC5C,SAAQC,SAAS,QAAO,cAAc;;;;;;;IAEtC,MAAMC,UAAU,GAACH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,KAAK,GAACJ,GAAG,CAAC,CAAC;IACjB,SAASK,eAAeA,CAACC,OAAO,EAAC;MAC7BR,KAAK,CAACS,GAAG,CAAC,2CAA2C,GAACD,OAAO,CAAC,CAC7DE,IAAI,CAAEC,QAAQ,IAAG;QACdN,UAAU,CAACO,KAAK,GAACD,QAAQ,CAACE,IAAI,CAACR,UAAU;QACzCC,KAAK,CAACM,KAAK,GAACD,QAAQ,CAACE,IAAI,CAACP,KAAK;MACnC,CAAC,CAAC,CACDQ,KAAK,CAAEC,KAAK,IAAG;QACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB,CAAC,CAAC;IACN;IACAd,SAAS,CAAC,YAAU;MAChBM,eAAe,CAAC,CAAC,CAAC;IACtB,CAAC,CAAC;IACF,SAASW,gBAAgBA,CAACC,OAAO,EAAC;MAC9BZ,eAAe,CAACY,OAAO,CAAC;IAC5B;IAEA,SAASC,cAAcA,CAACC,SAAS,EAAC;MAC9B,QAAOA,SAAS;QACZ,KAAK,CAAC;UACF,OAAO,KAAK;QAChB,KAAK,CAAC;UACF,OAAO,MAAM;QACjB,KAAK,CAAC;UACF,OAAO,OAAO;QAClB,KAAK,CAAC;UACF,OAAO,IAAI;QACf,KAAK,CAAC;UACF,OAAO,MAAM;MACrB;IACJ;IAEA,MAAMC,mBAAmB,GAACpB,GAAG,CAAC,KAAK,CAAC;IACpC,MAAMqB,UAAU,GAACpB,QAAQ,CAAC;MACtBqB,MAAM,EAAC,EAAE;MACTH,SAAS,EAAC,EAAE;MACZI,KAAK,EAAC,GAAG;MACTC,OAAO,EAAC,EAAE;MACVC,KAAK,EAAC;IACV,CAAC,CAAC;IAEF,MAAMC,QAAQ,GAAC1B,GAAG,CAAC,EAAE,CAAC;IAGtB,SAAS2B,gBAAgBA,CAACC,GAAG,EAAC;MAC1BR,mBAAmB,CAACV,KAAK,GAAC,IAAI;MAC9BZ,KAAK,CAACS,GAAG,CAAC,mCAAmC,CAAC,CAC7CC,IAAI,CAAEC,QAAQ,IAAG;QACdiB,QAAQ,CAAChB,KAAK,GAACD,QAAQ,CAACE,IAAI;QAC5BU,UAAU,CAACC,MAAM,GAACM,GAAG,CAACN,MAAM;QAC5BD,UAAU,CAACF,SAAS,GAACS,GAAG,CAACT,SAAS;QAClCE,UAAU,CAACE,KAAK,GAACK,GAAG,CAACL,KAAK;QAC1BF,UAAU,CAACG,OAAO,GAACI,GAAG,CAACJ,OAAO;QAC9BH,UAAU,CAACI,KAAK,GAACG,GAAG,CAACH,KAAK;QAC1BJ,UAAU,CAACQ,EAAE,GAACD,GAAG,CAACC,EAAE;QACpBf,OAAO,CAACC,GAAG,CAACM,UAAU,CAAC;MAC3B,CAAC,CAAC,CACDT,KAAK,CAAEC,KAAK,IAAG;QACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB,CAAC,CAAC;IACN;IAEA,MAAMiB,UAAU,GAAC9B,GAAG,CAAC,CAAC;MAAC6B,EAAE,EAAC,CAAC;MAACE,KAAK,EAAC;IAAK,CAAC,EAAC;MAACF,EAAE,EAAC,CAAC;MAACE,KAAK,EAAC;IAAM,CAAC,EAAC;MAACF,EAAE,EAAC,CAAC;MAACE,KAAK,EAAC;IAAO,CAAC,EAAC;MAACF,EAAE,EAAC,CAAC;MAACE,KAAK,EAAC;IAAI,CAAC,EAAC;MAACF,EAAE,EAAC,CAAC;MAACE,KAAK,EAAC;IAAM,CAAC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}