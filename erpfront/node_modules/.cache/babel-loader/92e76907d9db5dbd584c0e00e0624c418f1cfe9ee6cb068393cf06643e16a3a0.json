{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createBlock as _createBlock, resolveDynamicComponent as _resolveDynamicComponent } from \"vue\";\nconst _hoisted_1 = {\n  class: \"common-layout\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading-text\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"error-text\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_header = _resolveComponent(\"el-header\");\n  const _component_el_menu_item = _resolveComponent(\"el-menu-item\");\n  const _component_el_sub_menu = _resolveComponent(\"el-sub-menu\");\n  const _component_el_menu = _resolveComponent(\"el-menu\");\n  const _component_el_aside = _resolveComponent(\"el-aside\");\n  const _component_el_main = _resolveComponent(\"el-main\");\n  const _component_el_container = _resolveComponent(\"el-container\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" 后台主页布局 \"), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_container, null, {\n    default: _withCtx(() => [_createVNode(_component_el_header, {\n      class: \"top\"\n    }, {\n      default: _withCtx(() => _cache[0] || (_cache[0] = [_createTextVNode(\"ERP系统\")])),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_container, null, {\n      default: _withCtx(() => [_createVNode(_component_el_aside, {\n        width: \"240px\",\n        class: \"left\"\n      }, {\n        default: _withCtx(() => [_cache[1] || (_cache[1] = _createTextVNode(\" 系统菜单 \")), _createCommentVNode(\" 菜单组件 \"), _createVNode(_component_el_menu, {\n          class: \"el-menu-vertical-demo\",\n          onSelect: $setup.handlerSelect,\n          \"background-color\": \"#545c64\",\n          \"text-color\": \"#fff\",\n          \"active-text-color\": \"#ffd04b\"\n        }, {\n          default: _withCtx(() => [$setup.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"加载中...\")) : $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \"菜单加载失败\")) : (_openBlock(true), _createElementBlock(_Fragment, {\n            key: 2\n          }, _renderList($setup.menus, menu => {\n            return _openBlock(), _createBlock(_component_el_sub_menu, {\n              index: String(menu.id),\n              key: menu.id\n            }, {\n              title: _withCtx(() => [_createElementVNode(\"span\", null, _toDisplayString(menu.label), 1 /* TEXT */)]),\n              default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(menu.subMenus, subMenu => {\n                return _openBlock(), _createBlock(_component_el_menu_item, {\n                  index: String(subMenu.id),\n                  key: subMenu.id\n                }, {\n                  default: _withCtx(() => [_createTextVNode(_toDisplayString(subMenu.label), 1 /* TEXT */)]),\n                  _: 2 /* DYNAMIC */\n                }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"index\"]);\n              }), 128 /* KEYED_FRAGMENT */))]),\n              _: 2 /* DYNAMIC */\n            }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"index\"]);\n          }), 128 /* KEYED_FRAGMENT */))]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_main, {\n        class: \"right\"\n      }, {\n        default: _withCtx(() => [_createCommentVNode(\"通过点击左边菜单，动态显示不同组件 \"), _createCommentVNode(\"           <component :is=\\\"currentComponent\\\"></component>\"), (_openBlock(), _createBlock(_resolveDynamicComponent($setup.currentComponent)))]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_Fragment","_createCommentVNode","_createElementVNode","_hoisted_1","_createVNode","_component_el_container","default","_withCtx","_component_el_header","_cache","_createTextVNode","_","_component_el_aside","width","_component_el_menu","onSelect","$setup","handlerSelect","isLoading","_hoisted_2","error","_hoisted_3","_renderList","menus","menu","_createBlock","_component_el_sub_menu","index","String","id","title","_toDisplayString","label","subMenus","subMenu","_component_el_menu_item","_component_el_main","_resolveDynamicComponent","currentComponent"],"sources":["D:\\Program\\Web QP\\vue\\erpfront\\src\\views\\index.vue"],"sourcesContent":["<template>\n  <!-- 后台主页布局 -->\n  <div class=\"common-layout\">\n    <el-container>\n      <el-header class=\"top\">ERP系统</el-header>\n      <el-container   >\n        <el-aside width=\"240px\" class=\"left\">\n          系统菜单\n\n          <!-- 菜单组件 -->\n          <el-menu\n            class=\"el-menu-vertical-demo\"\n            @select=\"handlerSelect\"\n            background-color=\"#545c64\"\n            text-color=\"#fff\"\n            active-text-color=\"#ffd04b\"\n          >\n            <template v-if=\"isLoading\">\n              <div class=\"loading-text\">加载中...</div>\n            </template>\n            <template v-else-if=\"error\">\n              <div class=\"error-text\">菜单加载失败</div>\n            </template>\n            <template v-else>\n              <el-sub-menu v-for=\"menu in menus\" :index=\"String(menu.id)\" :key=\"menu.id\">\n                <template #title>\n                  <span>{{ menu.label }}</span>\n                </template>\n                <el-menu-item \n                  v-for=\"subMenu in menu.subMenus\" \n                  :index=\"String(subMenu.id)\"\n                  :key=\"subMenu.id\"\n                >\n                  {{ subMenu.label }}\n                </el-menu-item>\n              </el-sub-menu>\n            </template>\n          </el-menu>\n        </el-aside>\n        <el-main class=\"right\">\n            <!--通过点击左边菜单，动态显示不同组件 -->\n<!--           <component :is=\"currentComponent\"></component>-->\n          <component :is=\"currentComponent\"></component>\n        </el-main>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n\n<script setup>\nimport AddCustomer from \"@/views/AddCustomer\";\nimport ListCustomer from \"@/views/ListCustomer\";\nimport {onMounted, ref} from \"vue\";\nimport axios from 'axios';\n\n// 配置API基础URL\nconst API_BASE_URL = \"http://localhost:8081\";\n\n// 声明数组保存所有组件\nconst views = [AddCustomer, ListCustomer];\n// 声明变量保存当前需要显示的组件名\nconst currentComponent = ref(views[0]);\n// 声明菜单对象集合数据\nconst menus = ref([]);\n// 加载状态\nconst isLoading = ref(false);\nconst error = ref(null);\n\n/**\n * 获取菜单数据\n */\nconst fetchMenus = async () => {\n  try {\n    isLoading.value = true;\n    const response = await axios.get(`${API_BASE_URL}/listMenus`);\n    menus.value = response.data;\n  } catch (err) {\n    error.value = err;\n    console.error(\"Failed to fetch menus:\", err);\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n/**\n * 处理菜单选择\n * @param {string} id - 菜单项ID\n */\nconst handlerSelect = async (id) => {\n  try {\n    isLoading.value = true;\n    const response = await axios.get(`${API_BASE_URL}/compIndex?id=${id}`);\n    currentComponent.value = views[response.data];\n  } catch (err) {\n    error.value = err;\n    console.error(\"Failed to load component:\", err);\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n// 页面加载时获取菜单数据\nonMounted(fetchMenus);\n</script>\n\n<style scoped>\n.common-layout {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.top {\n  background-color: #409eff;\n  color: white;\n  padding: 0 20px;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  font-size: 18px;\n  font-weight: bold;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.left {\n  background-color: #545c64;\n  color: white;\n  height: calc(100vh - 60px);\n  overflow-y: auto;\n}\n\n.right {\n  background-color: #f5f7fa;\n  padding: 20px;\n  height: calc(100vh - 60px);\n  overflow-y: auto;\n}\n\n.el-menu {\n  border-right: none;\n}\n\n.el-menu-vertical-demo:not(.el-menu--collapse) {\n  width: 240px;\n}\n</style>"],"mappings":";;EAEOA,KAAK,EAAC;AAAe;;EAF5BC,GAAA;EAkBmBD,KAAK,EAAC;;;EAlBzBC,GAAA;EAqBmBD,KAAK,EAAC;;;;;;;;;;uBArBzBE,mBAAA,CAAAC,SAAA,SACEC,mBAAA,YAAe,EACfC,mBAAA,CA4CM,OA5CNC,UA4CM,GA3CJC,YAAA,CA0CeC,uBAAA;IA7CnBC,OAAA,EAAAC,QAAA,CAIM,MAAwC,CAAxCH,YAAA,CAAwCI,oBAAA;MAA7BX,KAAK,EAAC;IAAK;MAJ5BS,OAAA,EAAAC,QAAA,CAI6B,MAAKE,MAAA,QAAAA,MAAA,OAJlCC,gBAAA,CAI6B,OAAK,E;MAJlCC,CAAA;QAKMP,YAAA,CAuCeC,uBAAA;MA5CrBC,OAAA,EAAAC,QAAA,CAMQ,MAgCW,CAhCXH,YAAA,CAgCWQ,mBAAA;QAhCDC,KAAK,EAAC,OAAO;QAAChB,KAAK,EAAC;;QANtCS,OAAA,EAAAC,QAAA,CAM6C,MAGnC,C,0BATVG,gBAAA,CAM6C,QAGnC,IAAAT,mBAAA,UAAa,EACbG,YAAA,CA2BUU,kBAAA;UA1BRjB,KAAK,EAAC,uBAAuB;UAC5BkB,QAAM,EAAEC,MAAA,CAAAC,aAAa;UACtB,kBAAgB,EAAC,SAAS;UAC1B,YAAU,EAAC,MAAM;UACjB,mBAAiB,EAAC;;UAf9BX,OAAA,EAAAC,QAAA,CAiBY,MAEW,CAFKS,MAAA,CAAAE,SAAS,I,cACvBnB,mBAAA,CAAsC,OAAtCoB,UAAsC,EAAZ,QAAM,KAEbH,MAAA,CAAAI,KAAK,I,cACxBrB,mBAAA,CAAoC,OAApCsB,UAAoC,EAAZ,QAAM,M,kBAG9BtB,mBAAA,CAWcC,SAAA;YAnC5BF,GAAA;UAAA,GAAAwB,WAAA,CAwB0CN,MAAA,CAAAO,KAAK,EAAbC,IAAI;iCAAxBC,YAAA,CAWcC,sBAAA;cAXsBC,KAAK,EAAEC,MAAM,CAACJ,IAAI,CAACK,EAAE;cAAI/B,GAAG,EAAE0B,IAAI,CAACK;;cAC1DC,KAAK,EAAAvB,QAAA,CACd,MAA6B,CAA7BL,mBAAA,CAA6B,cAAA6B,gBAAA,CAApBP,IAAI,CAACQ,KAAK,iB;cA1BrC1B,OAAA,EAAAC,QAAA,CA6BkB,MAAgC,E,kBADlCR,mBAAA,CAMeC,SAAA,QAlC/BsB,WAAA,CA6BoCE,IAAI,CAACS,QAAQ,EAAxBC,OAAO;qCADhBT,YAAA,CAMeU,uBAAA;kBAJZR,KAAK,EAAEC,MAAM,CAACM,OAAO,CAACL,EAAE;kBACxB/B,GAAG,EAAEoC,OAAO,CAACL;;kBA/BhCvB,OAAA,EAAAC,QAAA,CAiCkB,MAAmB,CAjCrCG,gBAAA,CAAAqB,gBAAA,CAiCqBG,OAAO,CAACF,KAAK,iB;kBAjClCrB,CAAA;;;cAAAA,CAAA;;;UAAAA,CAAA;;QAAAA,CAAA;UAuCQP,YAAA,CAIUgC,kBAAA;QAJDvC,KAAK,EAAC;MAAO;QAvC9BS,OAAA,EAAAC,QAAA,CAwCY,MAAyB,CAAzBN,mBAAA,sBAAyB,EACrCA,mBAAA,+DAAgE,G,cACtDwB,YAAA,CAA8CY,wBA1CxD,CA0C0BrB,MAAA,CAAAsB,gBAAgB,I;QA1C1C3B,CAAA;;MAAAA,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}