{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, withKeys as _withKeys, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createBlock as _createBlock, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"purchase-container\"\n};\nconst _hoisted_2 = {\n  class: \"search-bar\"\n};\nconst _hoisted_3 = {\n  style: {\n    \"font-weight\": \"bold\",\n    \"color\": \"#409EFF\"\n  }\n};\nconst _hoisted_4 = {\n  class: \"action-buttons\"\n};\nconst _hoisted_5 = {\n  class: \"pagination-container\"\n};\nconst _hoisted_6 = {\n  class: \"form-value\"\n};\nconst _hoisted_7 = {\n  class: \"form-value\"\n};\nconst _hoisted_8 = {\n  class: \"form-value\"\n};\nconst _hoisted_9 = {\n  class: \"form-value\"\n};\nconst _hoisted_10 = {\n  class: \"dialog-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_input_number = _resolveComponent(\"el-input-number\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[13] || (_cache[13] = _createElementVNode(\"h2\", null, \"采购单列表\", -1 /* HOISTED */)), _createCommentVNode(\" 搜索和操作区域 \"), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_input, {\n    modelValue: $setup.searchQuery,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchQuery = $event),\n    placeholder: \"输入商品名称或编号搜索\",\n    clearable: \"\",\n    style: {\n      \"width\": \"300px\",\n      \"margin-right\": \"15px\"\n    },\n    onKeyup: _withKeys($setup.handleSearch, [\"enter\"])\n  }, {\n    prefix: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode($setup[\"Search\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $setup.handleSearch,\n    icon: $setup.Search\n  }, {\n    default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"搜索\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"icon\"]), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $setup.resetSearch,\n    icon: $setup.Refresh\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"重置\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"icon\"]), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $setup.exportData,\n    icon: $setup.Document\n  }, {\n    default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\"导出数据\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"icon\"])]), _createCommentVNode(\" 采购单表格 \"), _withDirectives((_openBlock(), _createBlock(_component_el_table, {\n    data: $setup.buyList,\n    style: {\n      \"width\": \"100%\",\n      \"margin-top\": \"20px\"\n    },\n    \"row-class-name\": $setup.tableRowClassName,\n    stripe: \"\",\n    border: \"\",\n    height: \"calc(100vh - 320px)\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"storeName\",\n      label: \"仓库名称\",\n      width: \"120\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"itemName\",\n      label: \"商品名称\",\n      width: \"150\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"buyNum\",\n      label: \"预计采购数量\",\n      width: \"120\",\n      align: \"center\"\n    }, {\n      default: _withCtx(scope => [_createElementVNode(\"span\", _hoisted_3, _toDisplayString(scope.row.buyNum), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"factBuyNum\",\n      label: \"实际采购数量\",\n      width: \"120\",\n      align: \"center\"\n    }, {\n      default: _withCtx(scope => [_createElementVNode(\"span\", {\n        style: _normalizeStyle({\n          color: scope.row.factBuyNum > 0 ? '#67C23A' : '#F56C6C'\n        })\n      }, _toDisplayString(scope.row.factBuyNum > 0 ? scope.row.factBuyNum : '未采购'), 5 /* TEXT, STYLE */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"buyUser\",\n      label: \"采购人\",\n      width: \"100\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"buyTime\",\n      label: \"采购时间\",\n      width: \"160\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"phone\",\n      label: \"采购人电话\",\n      width: \"130\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"isIn\",\n      label: \"状态\",\n      width: \"100\",\n      align: \"center\"\n    }, {\n      default: _withCtx(scope => [_createVNode(_component_el_tag, {\n        type: scope.row.isIn == 0 ? 'danger' : 'success',\n        size: \"small\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(scope.row.isIn == 0 ? '未入库' : '已入库'), 1 /* TEXT */)]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      fixed: \"right\",\n      label: \"操作\",\n      width: \"200\"\n    }, {\n      default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_4, [scope.row.factBuyNum == 0 ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 0,\n        type: \"primary\",\n        size: \"small\",\n        onClick: $event => $setup.showBuyListDialog(scope.row),\n        icon: $setup.Edit,\n        circle: \"\",\n        title: \"修改\"\n      }, null, 8 /* PROPS */, [\"onClick\", \"icon\"])) : _createCommentVNode(\"v-if\", true), scope.row.factBuyNum == 0 ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 1,\n        type: \"danger\",\n        size: \"small\",\n        icon: $setup.Delete,\n        circle: \"\",\n        title: \"删除\"\n      }, null, 8 /* PROPS */, [\"icon\"])) : _createCommentVNode(\"v-if\", true), scope.row.isIn == 0 ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 2,\n        type: \"success\",\n        size: \"small\",\n        icon: $setup.DocumentAdd,\n        circle: \"\",\n        title: \"生成订单\"\n      }, null, 8 /* PROPS */, [\"icon\"])) : _createCommentVNode(\"v-if\", true)])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"])), [[_directive_loading, $setup.loading]]), _createCommentVNode(\" 分页区域 \"), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_pagination, {\n    background: \"\",\n    \"page-size\": $setup.pageSize,\n    \"current-page\": $setup.currentPage,\n    \"pager-count\": 5,\n    total: $setup.total,\n    layout: \"total, sizes, prev, pager, next, jumper\",\n    \"page-sizes\": [5, 10, 20, 50],\n    onSizeChange: $setup.handleSizeChange,\n    onCurrentChange: $setup.handlePageChange\n  }, null, 8 /* PROPS */, [\"page-size\", \"current-page\", \"total\"])]), _createCommentVNode(\" 采购单编辑对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.buyListDialog,\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.buyListDialog = $event),\n    width: \"500px\",\n    title: \"商品采购\",\n    center: \"\",\n    \"close-on-click-modal\": false\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      model: $setup.buyForm,\n      \"label-width\": \"100px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"商品名称：\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_6, _toDisplayString($setup.buyForm.itemName), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"仓库：\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_7, _toDisplayString($setup.buyForm.storeName), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"供应商：\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_8, _toDisplayString($setup.buyForm.supplyName), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"产地：\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_9, _toDisplayString($setup.buyForm.placeName), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"预计采购量：\",\n        required: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input_number, {\n          modelValue: $setup.buyForm.buyNum,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.buyForm.buyNum = $event),\n          min: 1,\n          max: 99999,\n          \"controls-position\": \"right\",\n          style: {\n            \"width\": \"100%\"\n          }\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"实际采购量：\",\n        required: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input_number, {\n          modelValue: $setup.buyForm.factBuyNum,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.buyForm.factBuyNum = $event),\n          min: 0,\n          max: 99999,\n          \"controls-position\": \"right\",\n          style: {\n            \"width\": \"100%\"\n          }\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"采购人：\",\n        required: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.buyForm.buyUser,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.buyForm.buyUser = $event),\n          placeholder: \"请输入采购人姓名\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"采购人电话：\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.buyForm.phone,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.buyForm.phone = $event),\n          placeholder: \"请输入联系电话\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_10, [_createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: $setup.updateBuyOrder\n        }, {\n          default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\"保存\")])),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_button, {\n          onClick: $setup.resetBuyForm\n        }, {\n          default: _withCtx(() => _cache[11] || (_cache[11] = [_createTextVNode(\"重置\")])),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_button, {\n          onClick: _cache[5] || (_cache[5] = $event => $setup.buyListDialog = false)\n        }, {\n          default: _withCtx(() => _cache[12] || (_cache[12] = [_createTextVNode(\"取消\")])),\n          _: 1 /* STABLE */\n        })])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","_createVNode","_component_el_input","modelValue","$setup","searchQuery","_cache","$event","placeholder","clearable","onKeyup","_withKeys","handleSearch","prefix","_withCtx","_component_el_icon","default","_","_component_el_button","type","onClick","icon","Search","_createTextVNode","resetSearch","Refresh","exportData","Document","_createBlock","_component_el_table","data","buyList","tableRowClassName","stripe","border","height","_component_el_table_column","prop","label","width","align","scope","_hoisted_3","_toDisplayString","row","buyNum","_normalizeStyle","color","factBuyNum","_component_el_tag","isIn","size","fixed","_hoisted_4","key","showBuyListDialog","Edit","circle","title","Delete","DocumentAdd","loading","_hoisted_5","_component_el_pagination","background","pageSize","currentPage","total","layout","onSizeChange","handleSizeChange","onCurrentChange","handlePageChange","_component_el_dialog","buyListDialog","center","_component_el_form","model","buyForm","_component_el_form_item","_hoisted_6","itemName","_hoisted_7","storeName","_hoisted_8","supplyName","_hoisted_9","placeName","required","_component_el_input_number","min","max","buyUser","phone","_hoisted_10","updateBuyOrder","resetBuyForm"],"sources":["D:\\Program\\Java QP\\Erp\\erpfront\\src\\views\\login.vue"],"sourcesContent":["<template>\r\n  <div class=\"purchase-container\">\r\n    <h2>采购单列表</h2>\r\n    \r\n    <!-- 搜索和操作区域 -->\r\n    <div class=\"search-bar\">\r\n      <el-input \r\n        v-model=\"searchQuery\" \r\n        placeholder=\"输入商品名称或编号搜索\" \r\n        clearable \r\n        style=\"width: 300px; margin-right: 15px;\"\r\n        @keyup.enter=\"handleSearch\"\r\n      >\r\n        <template #prefix>\r\n          <el-icon><search /></el-icon>\r\n        </template>\r\n      </el-input>\r\n      \r\n      <el-button type=\"primary\" @click=\"handleSearch\" :icon=\"Search\">搜索</el-button>\r\n      <el-button type=\"primary\" @click=\"resetSearch\" :icon=\"Refresh\">重置</el-button>\r\n      <el-button type=\"primary\" @click=\"exportData\" :icon=\"Document\">导出数据</el-button>\r\n    </div>\r\n    \r\n    <!-- 采购单表格 -->\r\n    <el-table \r\n      :data=\"buyList\" \r\n      v-loading=\"loading\"\r\n      style=\"width: 100%; margin-top: 20px;\"\r\n      :row-class-name=\"tableRowClassName\"\r\n      stripe\r\n      border\r\n      height=\"calc(100vh - 320px)\"\r\n    >\r\n      <el-table-column prop=\"storeName\" label=\"仓库名称\" width=\"120\" />\r\n      <el-table-column prop=\"itemName\" label=\"商品名称\" width=\"150\" />\r\n      <el-table-column prop=\"buyNum\" label=\"预计采购数量\" width=\"120\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <span style=\"font-weight: bold; color: #409EFF;\">{{ scope.row.buyNum }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"factBuyNum\" label=\"实际采购数量\" width=\"120\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <span :style=\"{color: scope.row.factBuyNum > 0 ? '#67C23A' : '#F56C6C'}\">\r\n            {{ scope.row.factBuyNum > 0 ? scope.row.factBuyNum : '未采购' }}\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"buyUser\" label=\"采购人\" width=\"100\" />\r\n      <el-table-column prop=\"buyTime\" label=\"采购时间\" width=\"160\" />\r\n      <el-table-column prop=\"phone\" label=\"采购人电话\" width=\"130\" />\r\n      <el-table-column prop=\"isIn\" label=\"状态\" width=\"100\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-tag :type=\"scope.row.isIn == 0 ? 'danger' : 'success'\" size=\"small\">\r\n            {{ scope.row.isIn == 0 ? '未入库' : '已入库' }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"200\">\r\n        <template #default=\"scope\">\r\n          <div class=\"action-buttons\">\r\n            <el-button \r\n              v-if=\"scope.row.factBuyNum == 0\" \r\n              type=\"primary\" \r\n              size=\"small\" \r\n              @click=\"showBuyListDialog(scope.row)\"\r\n              :icon=\"Edit\"\r\n              circle\r\n              title=\"修改\"\r\n            />\r\n            <el-button \r\n              v-if=\"scope.row.factBuyNum == 0\" \r\n              type=\"danger\" \r\n              size=\"small\" \r\n              :icon=\"Delete\"\r\n              circle\r\n              title=\"删除\"\r\n            />\r\n            <el-button \r\n              v-if=\"scope.row.isIn == 0\" \r\n              type=\"success\" \r\n              size=\"small\" \r\n              :icon=\"DocumentAdd\"\r\n              circle\r\n              title=\"生成订单\"\r\n            />\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    \r\n    <!-- 分页区域 -->\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        background\r\n        :page-size=\"pageSize\"\r\n        :current-page=\"currentPage\"\r\n        :pager-count=\"5\"\r\n        :total=\"total\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :page-sizes=\"[5, 10, 20, 50]\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handlePageChange\"\r\n      />\r\n    </div>\r\n    \r\n    <!-- 采购单编辑对话框 -->\r\n    <el-dialog\r\n      v-model=\"buyListDialog\"\r\n      width=\"500px\"\r\n      title=\"商品采购\"\r\n      center\r\n      :close-on-click-modal=\"false\"\r\n    >\r\n      <el-form :model=\"buyForm\" label-width=\"100px\">\r\n        <el-form-item label=\"商品名称：\">\r\n          <div class=\"form-value\">{{buyForm.itemName}}</div>\r\n        </el-form-item>\r\n        <el-form-item label=\"仓库：\">\r\n          <div class=\"form-value\">{{buyForm.storeName}}</div>\r\n        </el-form-item>\r\n        <el-form-item label=\"供应商：\">\r\n          <div class=\"form-value\">{{buyForm.supplyName}}</div>\r\n        </el-form-item>\r\n        <el-form-item label=\"产地：\">\r\n          <div class=\"form-value\">{{buyForm.placeName}}</div>\r\n        </el-form-item>\r\n        <el-form-item label=\"预计采购量：\" required>\r\n          <el-input-number \r\n            v-model=\"buyForm.buyNum\" \r\n            :min=\"1\" \r\n            :max=\"99999\" \r\n            controls-position=\"right\"\r\n            style=\"width: 100%;\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"实际采购量：\" required>\r\n          <el-input-number \r\n            v-model=\"buyForm.factBuyNum\" \r\n            :min=\"0\" \r\n            :max=\"99999\" \r\n            controls-position=\"right\"\r\n            style=\"width: 100%;\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"采购人：\" required>\r\n          <el-input v-model=\"buyForm.buyUser\" placeholder=\"请输入采购人姓名\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"采购人电话：\">\r\n          <el-input v-model=\"buyForm.phone\" placeholder=\"请输入联系电话\" />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <div class=\"dialog-footer\">\r\n            <el-button type=\"primary\" @click=\"updateBuyOrder\">保存</el-button>\r\n            <el-button @click=\"resetBuyForm\">重置</el-button>\r\n            <el-button @click=\"buyListDialog = false\">取消</el-button>\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from 'axios';\r\nimport { ElMessage, ElMessageBox } from 'element-plus';\r\nimport { onMounted, reactive, ref } from 'vue';\r\nimport { Search, Refresh, Document, Edit, Delete, DocumentAdd } from '@element-plus/icons-vue';\r\n\r\nconst buyList = ref([]);\r\nconst total = ref(0);\r\nconst loading = ref(false);\r\nconst buyListDialog = ref(false);\r\nconst searchQuery = ref('');\r\nconst pageSize = ref(10);\r\nconst currentPage = ref(1);\r\n\r\n// 采购表单数据\r\nconst buyForm = reactive({\r\n  buyId: '',\r\n  productId: '',\r\n  storeId: '',\r\n  supplyId: '',\r\n  placeId: '',\r\n  itemName: '',\r\n  storeName: '',\r\n  supplyName: '',\r\n  placeName: '',\r\n  buyUser: '',\r\n  buyNum: 1,\r\n  factBuyNum: 0,\r\n  phone: ''\r\n});\r\n\r\n// 加载采购单数据\r\nasync function queryBuyList() {\r\n  loading.value = true;\r\n  try {\r\n    const response = await axios.get('http://localhost:8081/queryBuyList', {\r\n      params: {\r\n        pageNum: currentPage.value,\r\n        pageSize: pageSize.value,\r\n        search: searchQuery.value\r\n      }\r\n    });\r\n    \r\n    buyList.value = response.data.buyLists;\r\n    total.value = response.data.total;\r\n  } catch (error) {\r\n    console.error(error);\r\n    ElMessage.error('加载采购单数据失败');\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n}\r\n\r\n// 页面加载时获取数据\r\nonMounted(() => {\r\n  queryBuyList();\r\n});\r\n\r\n// 处理分页变化\r\nfunction handlePageChange(page) {\r\n  currentPage.value = page;\r\n  queryBuyList();\r\n}\r\n\r\n// 处理每页显示数量变化\r\nfunction handleSizeChange(size) {\r\n  pageSize.value = size;\r\n  currentPage.value = 1; // 重置到第一页\r\n  queryBuyList();\r\n}\r\n\r\n// 搜索处理\r\nfunction handleSearch() {\r\n  currentPage.value = 1;\r\n  queryBuyList();\r\n}\r\n\r\n// 重置搜索\r\nfunction resetSearch() {\r\n  searchQuery.value = '';\r\n  currentPage.value = 1;\r\n  queryBuyList();\r\n}\r\n\r\n// 导出数据\r\nfunction exportData() {\r\n  ElMessage.info('导出功能开发中...');\r\n}\r\n\r\n// 显示采购单编辑对话框\r\nasync function showBuyListDialog(row) {\r\n  try {\r\n    const response = await axios.get(`http://localhost:8081/buyAutoInfo/${row.productId}`);\r\n    const item = response.data;\r\n    \r\n    Object.assign(buyForm, {\r\n      buyId: row.buyId,\r\n      productId: item.id,\r\n      itemName: item.itemName,\r\n      storeId: item.storeId,\r\n      storeName: item.storeName,\r\n      supplyId: item.supplyId,\r\n      supplyName: item.supplyName,\r\n      placeId: item.placeId,\r\n      placeName: item.placeName,\r\n      buyUser: row.buyUser,\r\n      buyNum: row.buyNum,\r\n      factBuyNum: row.factBuyNum,\r\n      phone: row.phone\r\n    });\r\n    \r\n    buyListDialog.value = true;\r\n  } catch (error) {\r\n    console.error(error);\r\n    ElMessage.error('获取采购单信息失败');\r\n  }\r\n}\r\n\r\n// 更新采购单\r\nasync function updateBuyOrder() {\r\n  try {\r\n    // 验证表单数据\r\n    if (!buyForm.buyUser) {\r\n      ElMessage.warning('请填写采购人姓名');\r\n      return;\r\n    }\r\n    \r\n    if (buyForm.factBuyNum < 0) {\r\n      ElMessage.warning('实际采购量不能为负数');\r\n      return;\r\n    }\r\n    \r\n    const response = await axios.post(\"http://localhost:8081/updateBuyList\", buyForm);\r\n    \r\n    if (response.data.code === 200) {\r\n      ElMessage.success('采购单更新成功');\r\n      buyListDialog.value = false;\r\n      queryBuyList();\r\n    } else {\r\n      ElMessage.error(response.data.msg || '更新采购单失败');\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n    ElMessage.error('更新采购单失败');\r\n  }\r\n}\r\n\r\n// 重置采购表单\r\nfunction resetBuyForm() {\r\n  buyForm.buyNum = 1;\r\n  buyForm.factBuyNum = 0;\r\n  buyForm.buyUser = '';\r\n  buyForm.phone = '';\r\n}\r\n\r\n// 表格行样式\r\nfunction tableRowClassName({ row }) {\r\n  if (row.factBuyNum === 0 && row.isIn === 0) {\r\n    return 'warning-row';\r\n  }\r\n  return '';\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.purchase-container {\r\n  padding: 20px;\r\n  background-color: #f5f7fa;\r\n  min-height: 100vh;\r\n}\r\n\r\n.search-bar {\r\n  margin: 20px 0;\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.pagination-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n  padding: 15px;\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-value {\r\n  padding: 8px 0;\r\n  font-weight: bold;\r\n  color: #606266;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 15px;\r\n}\r\n\r\n/* 表格行样式 */\r\n:deep(.el-table .warning-row) {\r\n  background-color: #fffbe6;\r\n}\r\n\r\n:deep(.el-table .warning-row:hover > td) {\r\n  background-color: #fffaeb !important;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}