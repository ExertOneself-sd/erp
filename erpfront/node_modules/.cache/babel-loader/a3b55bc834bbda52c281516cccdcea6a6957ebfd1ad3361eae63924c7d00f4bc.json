{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", null, \"客户列表\", -1 /* HOISTED */)), _createVNode(_component_el_table, {\n    data: $setup.custList,\n    style: {\n      \"width\": \"100%\"\n    }\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\" 表格列定义保持不变 \"), _createVNode(_component_el_table_column, {\n      fixed: \"right\",\n      label: \"操作\",\n      width: \"120\"\n    }, {\n      default: _withCtx(scope => [_createVNode(_component_el_button, {\n        link: \"\",\n        type: \"primary\",\n        size: \"small\",\n        onClick: $event => $setup.deleteCust(scope.row.id)\n      }, {\n        default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"删除\")])),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_button, {\n        link: \"\",\n        type: \"primary\",\n        size: \"small\",\n        onClick: $event => $setup.openCustDialog(scope.row)\n      }, {\n        default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"修改\")])),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"]), _cache[5] || (_cache[5] = _createElementVNode(\"hr\", null, null, -1 /* HOISTED */)), _createVNode(_component_el_pagination, {\n    \"page-size\": $setup.pageSize,\n    \"pager-count\": 10,\n    layout: \"prev, pager, next\",\n    total: $setup.total,\n    class: \"mt-4\",\n    onCurrentChange: $setup.handlePageChange,\n    onSizeChange: $setup.handleSizeChange\n  }, null, 8 /* PROPS */, [\"page-size\", \"total\"]), _createVNode(_component_el_dialog, {\n    modelValue: $setup.dialogCustVisible,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.dialogCustVisible = $event),\n    width: \"80%\"\n  }, {\n    default: _withCtx(() => [_cache[3] || (_cache[3] = _createElementVNode(\"h2\", null, \"修改客户信息\", -1 /* HOISTED */)), _createVNode(_component_el_form, {\n      model: $setup.custFrom,\n      \"label-width\": \"120px\"\n    }, {\n      default: _withCtx(() => [_createCommentVNode(\" 表单项定义保持不变 \")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementBlock","_Fragment","_createElementVNode","_createVNode","_component_el_table","data","$setup","custList","style","default","_withCtx","_createCommentVNode","_component_el_table_column","fixed","label","width","scope","_component_el_button","link","type","size","onClick","$event","deleteCust","row","id","_cache","_createTextVNode","_","openCustDialog","_component_el_pagination","pageSize","layout","total","class","onCurrentChange","handlePageChange","onSizeChange","handleSizeChange","_component_el_dialog","modelValue","dialogCustVisible","_component_el_form","model","custFrom"],"sources":["D:\\Program\\Web QP\\vue\\erpfront\\src\\views\\ListCustomer.vue"],"sourcesContent":["<template>\n  <h2>客户列表</h2>\n  <el-table :data=\"custList\" style=\"width: 100%\">\n    <!-- 表格列定义保持不变 -->\n    <el-table-column fixed=\"right\" label=\"操作\" width=\"120\">\n      <template #default=\"scope\">\n        <el-button link type=\"primary\" size=\"small\" @click=\"deleteCust(scope.row.id)\">删除</el-button>\n        <el-button link type=\"primary\" size=\"small\" @click=\"openCustDialog(scope.row)\">修改</el-button>\n      </template>\n    </el-table-column>\n  </el-table>\n  <hr />\n  <el-pagination\n    :page-size=\"pageSize\"\n    :pager-count=\"10\"\n    layout=\"prev, pager, next\"\n    :total=\"total\"\n    class=\"mt-4\"\n    @current-change=\"handlePageChange\"\n    @size-change=\"handleSizeChange\"\n  />\n  <el-dialog\n    v-model=\"dialogCustVisible\"\n    width=\"80%\"\n  >\n    <h2>修改客户信息</h2>\n    <el-form :model=\"custFrom\" label-width=\"120px\">\n      <!-- 表单项定义保持不变 -->\n    </el-form>\n  </el-dialog>\n</template>\n\n<script setup>\nimport axios from 'axios';\nimport { onMounted, ref, reactive } from 'vue';\nimport { ElMessage } from 'element-plus';\n\n// 客户列表数据\nconst custList = ref([]);\n// 总记录数\nconst total = ref(0);\n// 当前页码，新增用于跟踪当前所在页码\nconst currentPage = ref(1);\n// 每页显示数量，新增用于灵活控制每页数量\nconst pageSize = ref(3);\n\n// 获取客户列表数据，改进参数传递方式\nfunction custListQeury(pageNum, pageSize) {\n  return axios.get('http://localhost:8081/listCust', {\n    params: {\n      pageNum,\n      pageSize\n    }\n  })\n   .then((response) => {\n      custList.value = response.data.custList;\n      total.value = response.data.total;\n    })\n   .catch((error) => {\n      console.log(error);\n    });\n}\n\nonMounted(() => {\n  custListQeury(currentPage.value, pageSize.value);\n});\n\n// 处理页码切换事件\nfunction handlePageChange(newPage) {\n  currentPage.value = newPage;\n  custListQeury(currentPage.value, pageSize.value);\n}\n\n// 处理每页显示数量变化事件\nfunction handleSizeChange(newSize) {\n  pageSize.value = newSize;\n  currentPage.value = 1; // 当每页数量改变时，重置页码为 1\n  custListQeury(currentPage.value, pageSize.value);\n}\n\nconst dialogCustVisible = ref(false);\nconst custFrom = reactive({\n  custName: '',\n  address: '',\n  phone: '',\n  cutType: '',\n  graed: 1,\n  hitTotal: 0,\n});\n\nfunction openCustDialog(row) {\n  dialogCustVisible.value = true;\n  Object.assign(custFrom, row);\n}\n\nfunction subCustFrom() {\n  axios.post('http://localhost:8081/updatecCust', custFrom)\n   .then((respose) => {\n      if (respose.data.code == 200) {\n        ElMessage(respose.data.msg);\n        dialogCustVisible.value = false;\n        // 根据当前页码和每页数量重新获取数据，保持当前分页状态\n        custListQeury(currentPage.value, pageSize.value);\n      } else {\n        ElMessage(respose.data.msg);\n      }\n    })\n   .catch((error) => {\n      console.log(error);\n    });\n}\n\nfunction deleteCust(id) {\n  axios.get('http://localhost:8081/delCust', {\n    params: {\n      id\n    }\n  })\n   .then((respose) => {\n      if (respose.data.code == 200) {\n        ElMessage(respose.data.msg);\n        // 根据当前页码和每页数量重新获取数据，保持当前分页状态\n        custListQeury(currentPage.value, pageSize.value);\n      } else {\n        ElMessage(respose.data.msg);\n      }\n    })\n   .catch((error) => {\n      console.log(error);\n    });\n}\n</script>\n\n<style scoped>\n/* 组件样式 */\n</style>"],"mappings":";;;;;;;;uBAAAA,mBAAA,CAAAC,SAAA,S,0BACEC,mBAAA,CAAa,YAAT,MAAI,sBACRC,YAAA,CAQWC,mBAAA;IARAC,IAAI,EAAEC,MAAA,CAAAC,QAAQ;IAAEC,KAAmB,EAAnB;MAAA;IAAA;;IAF7BC,OAAA,EAAAC,QAAA,CAGI,MAAkB,CAAlBC,mBAAA,eAAkB,EAClBR,YAAA,CAKkBS,0BAAA;MALDC,KAAK,EAAC,OAAO;MAACC,KAAK,EAAC,IAAI;MAACC,KAAK,EAAC;;MACnCN,OAAO,EAAAC,QAAA,CAC4EM,KADrE,KACvBb,YAAA,CAA4Fc,oBAAA;QAAjFC,IAAI,EAAJ,EAAI;QAACC,IAAI,EAAC,SAAS;QAACC,IAAI,EAAC,OAAO;QAAEC,OAAK,EAAAC,MAAA,IAAEhB,MAAA,CAAAiB,UAAU,CAACP,KAAK,CAACQ,GAAG,CAACC,EAAE;;QANnFhB,OAAA,EAAAC,QAAA,CAMsF,MAAEgB,MAAA,QAAAA,MAAA,OANxFC,gBAAA,CAMsF,IAAE,E;QANxFC,CAAA;wDAOQzB,YAAA,CAA6Fc,oBAAA;QAAlFC,IAAI,EAAJ,EAAI;QAACC,IAAI,EAAC,SAAS;QAACC,IAAI,EAAC,OAAO;QAAEC,OAAK,EAAAC,MAAA,IAAEhB,MAAA,CAAAuB,cAAc,CAACb,KAAK,CAACQ,GAAG;;QAPpFf,OAAA,EAAAC,QAAA,CAOuF,MAAEgB,MAAA,QAAAA,MAAA,OAPzFC,gBAAA,CAOuF,IAAE,E;QAPzFC,CAAA;;MAAAA,CAAA;;IAAAA,CAAA;yDAWE1B,mBAAA,CAAM,sCACNC,YAAA,CAQE2B,wBAAA;IAPC,WAAS,EAAExB,MAAA,CAAAyB,QAAQ;IACnB,aAAW,EAAE,EAAE;IAChBC,MAAM,EAAC,mBAAmB;IACzBC,KAAK,EAAE3B,MAAA,CAAA2B,KAAK;IACbC,KAAK,EAAC,MAAM;IACXC,eAAc,EAAE7B,MAAA,CAAA8B,gBAAgB;IAChCC,YAAW,EAAE/B,MAAA,CAAAgC;mDAEhBnC,YAAA,CAQYoC,oBAAA;IA7BdC,UAAA,EAsBalC,MAAA,CAAAmC,iBAAiB;IAtB9B,uBAAAf,MAAA,QAAAA,MAAA,MAAAJ,MAAA,IAsBahB,MAAA,CAAAmC,iBAAiB,GAAAnB,MAAA;IAC1BP,KAAK,EAAC;;IAvBVN,OAAA,EAAAC,QAAA,CAyBI,MAAe,C,0BAAfR,mBAAA,CAAe,YAAX,QAAM,sBACVC,YAAA,CAEUuC,kBAAA;MAFAC,KAAK,EAAErC,MAAA,CAAAsC,QAAQ;MAAE,aAAW,EAAC;;MA1B3CnC,OAAA,EAAAC,QAAA,CA2BM,MAAkB,CAAlBC,mBAAA,eAAkB,C;MA3BxBiB,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}