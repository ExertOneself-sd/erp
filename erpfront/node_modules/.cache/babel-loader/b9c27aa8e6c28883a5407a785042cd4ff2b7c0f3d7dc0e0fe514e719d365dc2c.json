{"ast":null,"code":"import AddCustomer from \"@/views/AddCustomer\";\nimport ListCustomer from \"@/views/ListCustomer\";\nimport { onMounted, ref } from \"vue\";\nimport axios from 'axios';\nimport { ElLoading, ElMessage } from 'element-plus';\n\n// 声明数组保存所有组件\n\nexport default {\n  __name: 'index',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const views = [AddCustomer, ListCustomer];\n    // 声明变量保存当前需要显示的组件名\n    const currentComponent = ref(views[0]);\n    // 声明菜单对象集合数据\n    const menus = ref([]);\n    // 加载状态\n    const loading = ref(false);\n\n    /* menu组件选中叶子节点触发的函数 */\n    const handlerSelect = function (id) {\n      loading.value = true;\n      axios.get(\"http://localhost:8081/compIndex?id=\" + id).then(response => {\n        currentComponent.value = views[response.data];\n      }).catch(error => {\n        ElMessage.error('加载组件失败: ' + error.message);\n      }).finally(() => {\n        loading.value = false;\n      });\n    };\n\n    // 页面加载，发生ajax请求加载左侧菜单信息\n    onMounted(() => {\n      const loadingInstance = ElLoading.service({\n        lock: true,\n        text: '加载中...',\n        background: 'rgba(0, 0, 0, 0.7)'\n      });\n      axios.get(\"http://localhost:8081/listMenus\").then(response => {\n        menus.value = response.data;\n      }).catch(error => {\n        ElMessage.error('加载菜单失败: ' + error.message);\n      }).finally(() => {\n        loadingInstance.close();\n      });\n    });\n    const __returned__ = {\n      views,\n      currentComponent,\n      menus,\n      loading,\n      handlerSelect,\n      get AddCustomer() {\n        return AddCustomer;\n      },\n      get ListCustomer() {\n        return ListCustomer;\n      },\n      onMounted,\n      ref,\n      get axios() {\n        return axios;\n      },\n      get ElLoading() {\n        return ElLoading;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["AddCustomer","ListCustomer","onMounted","ref","axios","ElLoading","ElMessage","views","currentComponent","menus","loading","handlerSelect","id","value","get","then","response","data","catch","error","message","finally","loadingInstance","service","lock","text","background","close"],"sources":["D:/Program/Web QP/vue/erpfront/src/views/index.vue"],"sourcesContent":["<template>\n  <!-- 后台主页布局 -->\n  <div class=\"common-layout\">\n    <el-container>\n      <el-header class=\"top\">ERP系统</el-header>\n      <el-container   >\n        <el-aside width=\"240px\" class=\"left\">\n          系统菜单\n\n          <!--添加Menu菜单组件-->\n          <el-menu\n              class=\"el-menu-vertical-demo\" @select=\"handlerSelect\" >\n            <el-sub-menu v-for=\"menu in menus\" :index=\"String(menu.id)\">\n              <template #title>\n                <el-icon><component :is=\"menu.icon || 'el-icon-menu'\" /></el-icon>\n                <span>{{ menu.label }}</span>\n              </template>\n              <el-menu-item v-for=\"subMenu in menu.subMenus\" :index=\"String(subMenu.id)\">\n                <el-icon><component :is=\"subMenu.icon || 'el-icon-document'\" /></el-icon>\n                <span>{{ subMenu.label }}</span>\n              </el-menu-item>\n            </el-sub-menu>\n\n          </el-menu>\n        </el-aside>\n        <el-main class=\"right\">\n            <!--通过点击左边菜单，动态显示不同组件 -->\n<!--           <component :is=\"currentComponent\"></component>-->\n          <el-card v-loading=\"loading\" element-loading-text=\"正在加载组件...\">\n            <transition name=\"fade\" mode=\"out-in\">\n              <component :is=\"currentComponent\"></component>\n            </transition>\n          </el-card>\n        </el-main>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n\n<script setup>\nimport AddCustomer from \"@/views/AddCustomer\";\nimport ListCustomer from \"@/views/ListCustomer\";\nimport {onMounted, ref} from \"vue\";\nimport axios from 'axios';\nimport { ElLoading, ElMessage } from 'element-plus';\n\n// 声明数组保存所有组件\nconst views = [AddCustomer, ListCustomer];\n// 声明变量保存当前需要显示的组件名\nconst currentComponent = ref(views[0]);\n// 声明菜单对象集合数据\nconst menus = ref([]);\n// 加载状态\nconst loading = ref(false);\n\n/* menu组件选中叶子节点触发的函数 */\nconst handlerSelect = function(id) {\n  loading.value = true;\n  axios.get(\"http://localhost:8081/compIndex?id=\" + id)\n    .then((response) => {\n      currentComponent.value = views[response.data];\n    })\n    .catch((error) => {\n      ElMessage.error('加载组件失败: ' + error.message);\n    })\n    .finally(() => {\n      loading.value = false;\n    });\n}\n\n// 页面加载，发生ajax请求加载左侧菜单信息\nonMounted(() => {\n  const loadingInstance = ElLoading.service({\n    lock: true,\n    text: '加载中...',\n    background: 'rgba(0, 0, 0, 0.7)'\n  });\n  \n  axios.get(\"http://localhost:8081/listMenus\")\n    .then((response) => {\n      menus.value = response.data;\n    })\n    .catch((error) => {\n      ElMessage.error('加载菜单失败: ' + error.message);\n    })\n    .finally(() => {\n      loadingInstance.close();\n    });\n});\n</script>\n\n<style scoped>\n:root {\n  --primary-color: #2d3a4b;\n  --sidebar-bg: #304156;\n  --sidebar-text: #bfcbd9;\n  --content-bg: #f0f2f5;\n  --active-color: #1890ff;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n.common-layout {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.top {\n  background-color: #2d3a4b;\n  color: white;\n  padding: 0 20px;\n  display: flex;\n  align-items: center;\n  font-size: 18px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);\n}\n\n.left {\n  background-color: #304156;\n  height: calc(100vh - 60px);\n  color: #bfcbd9;\n  transition: width 0.3s;\n}\n\n.right {\n  background-color: #f0f2f5;\n  padding: 20px;\n  min-height: calc(100vh - 60px);\n  overflow: auto;\n}\n\n.el-menu {\n  border-right: none;\n  background-color: transparent;\n}\n\n.el-menu-item, .el-sub-menu__title {\n  color: #bfcbd9;\n}\n\n.el-menu-item:hover, .el-sub-menu__title:hover {\n  background-color: #d6dade !important;\n}\n\n.el-menu-item.is-active {\n  background-color: #1890ff !important;\n  color: white;\n}\n</style>"],"mappings":"AAyCA,OAAOA,WAAW,MAAM,qBAAqB;AAC7C,OAAOC,YAAY,MAAM,sBAAsB;AAC/C,SAAQC,SAAS,EAAEC,GAAG,QAAO,KAAK;AAClC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,EAAEC,SAAS,QAAQ,cAAc;;AAEnD;;;;;;;;IACA,MAAMC,KAAK,GAAG,CAACP,WAAW,EAAEC,YAAY,CAAC;IACzC;IACA,MAAMO,gBAAgB,GAAGL,GAAG,CAACI,KAAK,CAAC,CAAC,CAAC,CAAC;IACtC;IACA,MAAME,KAAK,GAAGN,GAAG,CAAC,EAAE,CAAC;IACrB;IACA,MAAMO,OAAO,GAAGP,GAAG,CAAC,KAAK,CAAC;;IAE1B;IACA,MAAMQ,aAAa,GAAG,SAAAA,CAASC,EAAE,EAAE;MACjCF,OAAO,CAACG,KAAK,GAAG,IAAI;MACpBT,KAAK,CAACU,GAAG,CAAC,qCAAqC,GAAGF,EAAE,EACjDG,IAAI,CAAEC,QAAQ,IAAK;QAClBR,gBAAgB,CAACK,KAAK,GAAGN,KAAK,CAACS,QAAQ,CAACC,IAAI,CAAC;MAC/C,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAChBb,SAAS,CAACa,KAAK,CAAC,UAAU,GAAGA,KAAK,CAACC,OAAO,CAAC;MAC7C,CAAC,EACAC,OAAO,CAAC,MAAM;QACbX,OAAO,CAACG,KAAK,GAAG,KAAK;MACvB,CAAC,CAAC;IACN;;IAEA;IACAX,SAAS,CAAC,MAAM;MACd,MAAMoB,eAAe,GAAGjB,SAAS,CAACkB,OAAO,CAAC;QACxCC,IAAI,EAAE,IAAI;QACVC,IAAI,EAAE,QAAQ;QACdC,UAAU,EAAE;MACd,CAAC,CAAC;MAEFtB,KAAK,CAACU,GAAG,CAAC,iCAAiC,EACxCC,IAAI,CAAEC,QAAQ,IAAK;QAClBP,KAAK,CAACI,KAAK,GAAGG,QAAQ,CAACC,IAAI;MAC7B,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAChBb,SAAS,CAACa,KAAK,CAAC,UAAU,GAAGA,KAAK,CAACC,OAAO,CAAC;MAC7C,CAAC,EACAC,OAAO,CAAC,MAAM;QACbC,eAAe,CAACK,KAAK,CAAC,CAAC;MACzB,CAAC,CAAC;IACN,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}