{"ast":null,"code":"import axios from 'axios';\nimport { onMounted, ref, reactive } from 'vue';\nimport { ElMessage } from \"element-plus\";\n\n// 客户列表逻辑\n\nexport default {\n  __name: 'ListCustomer',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const custList = ref([]);\n    const total = ref();\n    function custListQeury(pageNum) {\n      axios.get(\"http://localhost:8081/listCust?pageNum=\" + pageNum).then(response => {\n        custList.value = response.data.custList;\n        total.value = response.data.total;\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    onMounted(function () {\n      custListQeury(1);\n    });\n    function handlePageChange(value) {\n      custListQeury(value);\n    }\n    const dialogCustVisible = ref(false);\n    const custFrom = reactive({\n      custName: '',\n      address: '',\n      phone: '',\n      cutType: '',\n      graed: 1,\n      hitTotal: 0\n    });\n    function openCustDialog(index, row) {\n      dialogCustVisible.value = true;\n      custFrom.custName = row.custName;\n      custFrom.address = row.address;\n      custFrom.phone = row.phone;\n      custFrom.cutType = row.cutType;\n      custFrom.graed = row.graed;\n      custFrom.id = row.id;\n    }\n    function subCustFrom() {\n      axios.post(\"http://localhost:8081/updatecCust\", custFrom).then(respose => {\n        if (respose.data.code == 200) {\n          ElMessage(respose.data.msg);\n          dialogCustVisible.value = false;\n        } else {\n          ElMessage(respose.data.msg);\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    function deleteCust(id) {\n      axios.get(\"http://localhost:8081/delCust?id=\" + id).then(respose => {\n        if (respose.data.code == 200) {\n          ElMessage(respose.data.msg);\n          custListQeury(1);\n        } else {\n          ElMessage(respose.data.msg);\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    const __returned__ = {\n      custList,\n      total,\n      custListQeury,\n      handlePageChange,\n      dialogCustVisible,\n      custFrom,\n      openCustDialog,\n      subCustFrom,\n      deleteCust,\n      get axios() {\n        return axios;\n      },\n      onMounted,\n      ref,\n      reactive,\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["axios","onMounted","ref","reactive","ElMessage","custList","total","custListQeury","pageNum","get","then","response","value","data","catch","error","console","log","handlePageChange","dialogCustVisible","custFrom","custName","address","phone","cutType","graed","hitTotal","openCustDialog","index","row","id","subCustFrom","post","respose","code","msg","deleteCust"],"sources":["D:/Program/Web QP/vue/erpfront/src/views/ListCustomer.vue"],"sourcesContent":["<template>\n    <h2>客户列表</h2>\n  <el-table :data=\"custList\" style=\"width: 100%\">\n    <el-table-column prop=\"id\" label=\"客户编号\" width=\"180\" />\n    <el-table-column prop=\"custName\" label=\"客户姓名\" width=\"180\" />\n    <el-table-column prop=\"address\" label=\"地址\" />\n    <el-table-column prop=\"phone\" label=\"联系电话\" />\n    <el-table-column prop=\"cutType\" label=\"客户职业\" />\n    <el-table-column prop=\"graed\" label=\"客户等级\" />\n    <el-table-column prop=\"hitTotal\" label=\"消费总额\" />\n\n    <el-table-column fixed=\"right\" label=\"操作\" width=\"120\">\n      <template #default=\"scope\">\n        <el-button link type=\"primary\" size=\"small\" @click=\"deleteCust(scope.row.id)\">删除</el-button>\n        <el-button link type=\"primary\" size=\"small\" @click=\"openCustDialog(scope.$index,scope.row)\">修改</el-button>\n      </template>\n    </el-table-column>\n  </el-table>\n  <hr/>\n  <el-pagination\n    :page-size=\"6\"\n    :pager-count=\"10\"\n    layout=\"prev, pager, next\"\n    :total=\"total\"\n    class=\"mt-4\" @current-change=\"handlePageChange\"\n  />\n  <el-dialog\n      v-model=\"dialogCustVisible\"\n      width=\"80%\"\n  >\n  <h2>修改客户信息</h2>\n  <el-form :model=\"custFrom\" label-width=\"120px\">\n    <el-form-item label=\"客户姓名\">\n      <el-input v-model=\"custFrom.custName\" />\n    </el-form-item>\n    <el-form-item label=\"地址\">\n      <el-input v-model=\"custFrom.address\" />\n    </el-form-item>\n     <el-form-item label=\"联系电话\">\n      <el-input v-model=\"custFrom.phone\" />\n    </el-form-item>\n    <el-form-item label=\"客户职业\">\n      <el-select v-model=\"custFrom.cutType\" placeholder=\"请选择职业....\">\n        <el-option label=\"网络工程师\" value=\"网络工程师\" />\n        <el-option label=\"架构师\" value=\"架构师\" />\n        <el-option label=\"运维\" value=\"运维\" />\n        <el-option label=\"销售\" value=\"销售\" />\n        <el-option label=\"项目经理\" value=\"项目经理\" />\n      </el-select>\n    </el-form-item>\n     <el-form-item label=\"客户等级\">\n      <el-input v-model=\"custFrom.graed\" />\n    </el-form-item>\n        <el-form-item>\n      <el-button type=\"primary\" @click=\"subCustFrom\">保存</el-button>\n      <el-button>取消</el-button>\n    </el-form-item>\n  </el-form>\n  </el-dialog>\n</template>\n\n<script setup>\nimport axios from 'axios';\nimport {onMounted, ref ,reactive} from 'vue';\nimport {ElMessage} from \"element-plus\";\n\n// 客户列表逻辑\nconst custList=ref([])\nconst total=ref()\nfunction custListQeury(pageNum){\n  axios.get(\"http://localhost:8081/listCust?pageNum=\"+pageNum)\n  .then((response)=>{\n    custList.value=response.data.custList\n    total.value=response.data.total\n  })\n  .catch((error)=>{\n    console.log(error);\n  })\n}\nonMounted(function(){\n  custListQeury(1)\n})\nfunction handlePageChange(value){\n  custListQeury(value)\n}\n\nconst dialogCustVisible = ref(false)\nconst custFrom=reactive({\n  custName:'',\n  address:'',\n  phone:'',\n  cutType:'',\n  graed:1,\n  hitTotal:0,\n})\n\nfunction openCustDialog(index,row) {\n  dialogCustVisible.value = true;\n  custFrom.custName = row.custName;\n  custFrom.address = row.address;\n  custFrom.phone = row.phone;\n  custFrom.cutType=row.cutType;\n  custFrom.graed=row.graed;\n  custFrom.id=row.id;\n}\n\nfunction subCustFrom(){\n  axios.post(\"http://localhost:8081/updatecCust\",custFrom)\n  .then((respose)=>{\n    if(respose.data.code==200){\n      ElMessage(respose.data.msg)\n      dialogCustVisible.value=false;\n    }else{\n      ElMessage(respose.data.msg)\n    }\n  })\n  .catch((error)=>{\n    console.log(error);\n  })\n}\n\nfunction deleteCust(id){\n  axios.get(\"http://localhost:8081/delCust?id=\"+id)\n  .then((respose)=>{\n    if(respose.data.code==200){\n      ElMessage(respose.data.msg)\n      custListQeury(1)\n    }else{\n      ElMessage(respose.data.msg)\n    }\n  })\n  .catch((error)=>{\n    console.log(error);\n  })\n}\n\n</script>\n\n<style scoped>\n/* 组件样式 */\n</style>\n"],"mappings":"AA8DA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,SAAS,EAAEC,GAAG,EAAEC,QAAQ,QAAO,KAAK;AAC5C,SAAQC,SAAS,QAAO,cAAc;;AAEtC;;;;;;;;IACA,MAAMC,QAAQ,GAACH,GAAG,CAAC,EAAE;IACrB,MAAMI,KAAK,GAACJ,GAAG,CAAC;IAChB,SAASK,aAAaA,CAACC,OAAO,EAAC;MAC7BR,KAAK,CAACS,GAAG,CAAC,yCAAyC,GAACD,OAAO,EAC1DE,IAAI,CAAEC,QAAQ,IAAG;QAChBN,QAAQ,CAACO,KAAK,GAACD,QAAQ,CAACE,IAAI,CAACR,QAAO;QACpCC,KAAK,CAACM,KAAK,GAACD,QAAQ,CAACE,IAAI,CAACP,KAAI;MAChC,CAAC,EACAQ,KAAK,CAAEC,KAAK,IAAG;QACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB,CAAC;IACH;IACAd,SAAS,CAAC,YAAU;MAClBM,aAAa,CAAC,CAAC;IACjB,CAAC;IACD,SAASW,gBAAgBA,CAACN,KAAK,EAAC;MAC9BL,aAAa,CAACK,KAAK;IACrB;IAEA,MAAMO,iBAAiB,GAAGjB,GAAG,CAAC,KAAK;IACnC,MAAMkB,QAAQ,GAACjB,QAAQ,CAAC;MACtBkB,QAAQ,EAAC,EAAE;MACXC,OAAO,EAAC,EAAE;MACVC,KAAK,EAAC,EAAE;MACRC,OAAO,EAAC,EAAE;MACVC,KAAK,EAAC,CAAC;MACPC,QAAQ,EAAC;IACX,CAAC;IAED,SAASC,cAAcA,CAACC,KAAK,EAACC,GAAG,EAAE;MACjCV,iBAAiB,CAACP,KAAK,GAAG,IAAI;MAC9BQ,QAAQ,CAACC,QAAQ,GAAGQ,GAAG,CAACR,QAAQ;MAChCD,QAAQ,CAACE,OAAO,GAAGO,GAAG,CAACP,OAAO;MAC9BF,QAAQ,CAACG,KAAK,GAAGM,GAAG,CAACN,KAAK;MAC1BH,QAAQ,CAACI,OAAO,GAACK,GAAG,CAACL,OAAO;MAC5BJ,QAAQ,CAACK,KAAK,GAACI,GAAG,CAACJ,KAAK;MACxBL,QAAQ,CAACU,EAAE,GAACD,GAAG,CAACC,EAAE;IACpB;IAEA,SAASC,WAAWA,CAAA,EAAE;MACpB/B,KAAK,CAACgC,IAAI,CAAC,mCAAmC,EAACZ,QAAQ,EACtDV,IAAI,CAAEuB,OAAO,IAAG;QACf,IAAGA,OAAO,CAACpB,IAAI,CAACqB,IAAI,IAAE,GAAG,EAAC;UACxB9B,SAAS,CAAC6B,OAAO,CAACpB,IAAI,CAACsB,GAAG;UAC1BhB,iBAAiB,CAACP,KAAK,GAAC,KAAK;QAC/B,CAAC,MAAI;UACHR,SAAS,CAAC6B,OAAO,CAACpB,IAAI,CAACsB,GAAG;QAC5B;MACF,CAAC,EACArB,KAAK,CAAEC,KAAK,IAAG;QACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB,CAAC;IACH;IAEA,SAASqB,UAAUA,CAACN,EAAE,EAAC;MACrB9B,KAAK,CAACS,GAAG,CAAC,mCAAmC,GAACqB,EAAE,EAC/CpB,IAAI,CAAEuB,OAAO,IAAG;QACf,IAAGA,OAAO,CAACpB,IAAI,CAACqB,IAAI,IAAE,GAAG,EAAC;UACxB9B,SAAS,CAAC6B,OAAO,CAACpB,IAAI,CAACsB,GAAG;UAC1B5B,aAAa,CAAC,CAAC;QACjB,CAAC,MAAI;UACHH,SAAS,CAAC6B,OAAO,CAACpB,IAAI,CAACsB,GAAG;QAC5B;MACF,CAAC,EACArB,KAAK,CAAEC,KAAK,IAAG;QACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB,CAAC;IACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}